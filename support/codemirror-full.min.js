window.CodeMirror=(function(){var a8=/gecko\/\d/i.test(navigator.userAgent);var ad=/MSIE \d/.test(navigator.userAgent);var bN=/MSIE [1-7]\b/.test(navigator.userAgent);var bM=/MSIE [1-8]\b/.test(navigator.userAgent);var I=/WebKit\//.test(navigator.userAgent);var bb=I&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var ao=/Chrome\//.test(navigator.userAgent);var q=/Opera\//.test(navigator.userAgent);var bd=/Apple Computer/.test(navigator.vendor);var U=/KHTML\//.test(navigator.userAgent);var cF=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);var cL=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var a1=/PhantomJS/.test(navigator.userAgent);var aj=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var bs=aj||/Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);var aN=aj||/Mac/.test(navigator.platform);var ax=false,cS=false;function af(dc,dd){if(!(this instanceof af)){return new af(dc,dd)}this.options=dd=dd||{};for(var de in aR){if(!dd.hasOwnProperty(de)&&aR.hasOwnProperty(de)){dd[de]=aR[de]}}aM(dd);var dg=this.display=bc(dc);dg.wrapper.CodeMirror=this;bC(this);if(dd.autofocus&&!bs){bj(this)}this.view=aE(new br([new G([a9("",null,bB(dg))])]));this.nextOpId=0;bK(this);cH(this);if(dd.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}this.setValue(dd.value||"");if(ad){setTimeout(bG(cG,this,true),20)}this.view.history=aD();p(this);var dh;try{dh=(document.activeElement==dg.input)}catch(df){}if(dh||(dd.autofocus&&!bs)){setTimeout(bG(c5,this),20)}else{H(this)}i(this,function(){for(var dj in c1){if(c1.propertyIsEnumerable(dj)){c1[dj](this,dd[dj],g)}}for(var di=0;di<D.length;++di){D[di](this)}})()}function bc(dc){var df={};var de=df.input=bm("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");de.setAttribute("wrap","off");de.setAttribute("autocorrect","off");de.setAttribute("autocapitalize","off");df.inputDiv=bm("div",[de],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");df.scrollbarH=bm("div",[bm("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");df.scrollbarV=bm("div",[bm("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");df.scrollbarFiller=bm("div",null,"CodeMirror-scrollbar-filler");df.lineDiv=bm("div");df.selectionDiv=bm("div",null,null,"position: relative; z-index: 1");df.cursor=bm("pre","\u00a0","CodeMirror-cursor");df.otherCursor=bm("pre","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");df.measure=bm("div",null,"CodeMirror-measure");df.lineSpace=bm("div",[df.measure,df.selectionDiv,df.lineDiv,df.cursor,df.otherCursor],null,"position: relative; outline: none");df.mover=bm("div",[bm("div",[df.lineSpace],"CodeMirror-lines")],null,"position: relative");df.sizer=bm("div",[df.mover],"CodeMirror-sizer");df.heightForcer=bm("div","\u00a0",null,"position: absolute; height: "+cA+"px");df.gutters=bm("div",null,"CodeMirror-gutters");df.lineGutter=null;var dd=bm("div",[df.sizer,df.heightForcer,df.gutters],null,"position: relative; min-height: 100%");df.scroller=bm("div",[dd],"CodeMirror-scroll");df.scroller.setAttribute("tabIndex","-1");df.wrapper=bm("div",[df.inputDiv,df.scrollbarH,df.scrollbarV,df.scrollbarFiller,df.scroller],"CodeMirror");if(bN){df.gutters.style.zIndex=-1;df.scroller.style.paddingRight=0}if(dc.appendChild){dc.appendChild(df.wrapper)}else{dc(df.wrapper)}if(aj){de.style.width="0px"}if(!I){df.scroller.draggable=true}if(U){df.inputDiv.style.height="1px";df.inputDiv.style.position="absolute"}else{if(bN){df.scrollbarH.style.minWidth=df.scrollbarV.style.minWidth="18px"}}df.viewOffset=df.showingFrom=df.showingTo=df.lastSizeC=0;df.lineNumWidth=df.lineNumInnerWidth=df.lineNumChars=null;df.prevInput="";df.alignWidgets=false;df.pollingFast=false;df.poll=new h();df.draggingText=false;df.cachedCharWidth=df.cachedTextHeight=null;df.measureLineCache=[];df.measureLineCachePos=0;df.inaccurateSelection=false;df.pasteIncoming=false;return df}function aE(dc){var dd={line:0,ch:0};return{doc:dc,frontier:0,highlight:new h(),sel:{from:dd,to:dd,head:dd,anchor:dd,shift:false,extend:false},scrollTop:0,scrollLeft:0,overwrite:false,focused:false,maxLine:cM(dc,0),maxLineLength:0,maxLineChanged:false,suppressEdits:false,goalColumn:null,cantEdit:false,keyMaps:[]}}function bK(dc){var dd=dc.view.doc;dc.view.mode=af.getMode(dc.options,dc.options.mode);dd.iter(0,dd.size,function(de){de.stateAfter=null});dc.view.frontier=0;bp(dc,100)}function cN(dc){var df=dc.view.doc,dd=bB(dc.display);if(dc.options.lineWrapping){dc.display.wrapper.className+=" CodeMirror-wrap";var de=dc.display.scroller.clientWidth/aO(dc.display)-3;df.iter(0,df.size,function(dg){if(dg.height==0){return}var dh=Math.ceil(dg.text.length/de)||1;if(dh!=1){aA(dg,dh*dd)}});dc.display.sizer.style.minWidth=""}else{dc.display.wrapper.className=dc.display.wrapper.className.replace(" CodeMirror-wrap","");bg(dc.view);df.iter(0,df.size,function(dg){if(dg.height!=0){aA(dg,dd)}})}bv(dc,0,df.size);cr(dc);setTimeout(function(){t(dc.display,dc.view.doc.height)},100)}function cD(dc){var dd=c4[dc.options.keyMap].style;dc.display.wrapper.className=dc.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(dd?" cm-keymap-"+dd:"")}function cH(dc){dc.display.wrapper.className=dc.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+dc.options.theme.replace(/(^|\s)\s*/g," cm-s-");cr(dc)}function bF(dc){bC(dc);cg(dc,true)}function bC(dc){var dd=dc.display.gutters,dh=dc.options.gutters;ck(dd);for(var de=0;de<dh.length;++de){var df=dh[de];var dg=dd.appendChild(bm("div",null,"CodeMirror-gutter "+df));if(df=="CodeMirror-linenumbers"){dc.display.lineGutter=dg;dg.style.width=(dc.display.lineNumWidth||1)+"px"}}dd.style.display=de?"":"none"}function bI(dg,de){if(de.height==0){return 0}var dd=de.text.length,dc,dh=de;while(dc=cR(dh)){var df=dc.find();dh=cM(dg,df.from.line);dd+=df.from.ch-df.to.ch}dh=de;while(dc=C(dh)){var df=dc.find();dd-=dh.text.length-df.from.ch;dh=cM(dg,df.to.line);dd+=dh.text.length-df.to.ch}return dd}function bg(dc){dc.maxLine=cM(dc.doc,0);dc.maxLineLength=bI(dc.doc,dc.maxLine);dc.maxLineChanged=true;dc.doc.iter(1,dc.doc.size,function(de){var dd=bI(dc.doc,de);if(dd>dc.maxLineLength){dc.maxLineLength=dd;dc.maxLine=de}})}function aM(dc){var de=false;for(var dd=0;dd<dc.gutters.length;++dd){if(dc.gutters[dd]=="CodeMirror-linenumbers"){if(dc.lineNumbers){de=true}else{dc.gutters.splice(dd--,1)}}}if(!de&&dc.lineNumbers){dc.gutters.push("CodeMirror-linenumbers")}}function t(dh,dc){var de=dc+2*cz(dh);dh.sizer.style.minHeight=dh.heightForcer.style.top=de+"px";var df=Math.max(de,dh.scroller.scrollHeight);var dg=dh.scroller.scrollWidth>dh.scroller.clientWidth;var dd=df>dh.scroller.clientHeight;if(dd){dh.scrollbarV.style.display="block";dh.scrollbarV.style.bottom=dg?bX(dh.measure)+"px":"0";dh.scrollbarV.firstChild.style.height=(df-dh.scroller.clientHeight+dh.scrollbarV.clientHeight)+"px"}else{dh.scrollbarV.style.display=""}if(dg){dh.scrollbarH.style.display="block";dh.scrollbarH.style.right=dd?bX(dh.measure)+"px":"0";dh.scrollbarH.firstChild.style.width=(dh.scroller.scrollWidth-dh.scroller.clientWidth+dh.scrollbarH.clientWidth)+"px"}else{dh.scrollbarH.style.display=""}if(dg&&dd){dh.scrollbarFiller.style.display="block";dh.scrollbarFiller.style.height=dh.scrollbarFiller.style.width=bX(dh.measure)+"px"}else{dh.scrollbarFiller.style.display=""}if(cF&&bX(dh.measure)===0){dh.scrollbarV.style.minWidth=dh.scrollbarH.style.minHeight=cL?"18px":"12px"}}function bl(dh,dg,df){var de=dh.scroller.scrollTop,dc=dh.wrapper.clientHeight;if(typeof df=="number"){de=df}else{if(df){de=df.top;dc=df.bottom-df.top}}de=Math.floor(de-cz(dh));var dd=Math.ceil(de+dc);return{from:aS(dg,de),to:aS(dg,dd)}}function V(dc){var di=dc.display;if(!di.alignWidgets&&!di.gutters.firstChild){return}var df=c8(di)-di.scroller.scrollLeft+dc.view.scrollLeft;var dh=di.gutters.offsetWidth,de=df+"px";for(var dj=di.lineDiv.firstChild;dj;dj=dj.nextSibling){if(dj.alignable){for(var dg=0,dd=dj.alignable;dg<dd.length;++dg){dd[dg].style.left=de}}}di.gutters.style.left=(df+dh)+"px"}function T(dc){if(!dc.options.lineNumbers){return false}var dh=dc.view.doc,dd=ct(dc.options,dh.size-1),dg=dc.display;if(dd.length!=dg.lineNumChars){var di=dg.measure.appendChild(bm("div",[bm("div",dd)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var de=di.firstChild.offsetWidth,df=di.offsetWidth-de;dg.lineGutter.style.width="";dg.lineNumInnerWidth=Math.max(de,dg.lineGutter.offsetWidth-df);dg.lineNumWidth=dg.lineNumInnerWidth+df;dg.lineNumChars=dg.lineNumInnerWidth?dd.length:-1;dg.lineGutter.style.width=dg.lineNumWidth+"px";return true}return false}function ct(dc,dd){return String(dc.lineNumberFormatter(dd+dc.firstLineNumber))}function c8(dc){return dc.scroller.getBoundingClientRect().left-dc.sizer.getBoundingClientRect().left}function cg(dc,df,dg){var de=dc.display.showingFrom,dh=dc.display.showingTo;var dd=bh(dc,df,dg);if(dd){bP(dc,dc,"update",dc);if(dc.display.showingFrom!=de||dc.display.showingTo!=dh){bP(dc,dc,"viewportChange",dc,dc.display.showingFrom,dc.display.showingTo)}}c7(dc);t(dc.display,dc.view.doc.height);return dd}function bh(dh,dx,dc){var dt=dh.display,dy=dh.view.doc;if(!dt.wrapper.clientWidth){dt.showingFrom=dt.showingTo=dt.viewOffset=0;return}var de=bl(dt,dy,dc);if(dx!==true&&dx.length==0&&de.from>dt.showingFrom&&de.to<dt.showingTo){return}if(dx&&T(dh)){dx=true}dt.sizer.style.marginLeft=dt.scrollbarH.style.left=dt.gutters.offsetWidth+"px";if(dx!==true&&cS){for(var du=0;du<dx.length;++du){var dj=dx[du],dw;while(dw=cR(cM(dy,dj.from))){var ds=dw.find().from.line;if(dj.diff){dj.diff-=dj.from-ds}dj.from=ds}}}var df=dx===true?0:Infinity;if(dh.options.lineNumbers&&dx&&dx!==true){for(var du=0;du<dx.length;++du){if(dx[du].diff){df=dx[du].from;break}}}var ds=Math.max(de.from-dh.options.viewportMargin,0);var dd=Math.min(dy.size,de.to+dh.options.viewportMargin);if(dt.showingFrom<ds&&ds-dt.showingFrom<20){ds=dt.showingFrom}if(dt.showingTo>dd&&dt.showingTo-dd<20){dd=Math.min(dy.size,dt.showingTo)}if(cS){ds=k(at(dy,cM(dy,ds)));while(dd<dy.size&&aU(cM(dy,dd))){++dd}}var dv=dx===true?[]:bW([{from:dt.showingFrom,to:dt.showingTo}],dx);var dq=0;for(var du=0;du<dv.length;++du){var dm=dv[du];if(dm.from<ds){dm.from=ds}if(dm.to>dd){dm.to=dd}if(dm.from>=dm.to){dv.splice(du--,1)}else{dq+=dm.to-dm.from}}if(dq==dd-ds&&ds==dt.showingFrom&&dd==dt.showingTo){return}dv.sort(function(dA,dz){return dA.from-dz.from});if(dq<(dd-ds)*0.7){dt.lineDiv.style.display="none"}ac(dh,ds,dd,dv,df);dt.lineDiv.style.display="";var dn=ds!=dt.showingFrom||dd!=dt.showingTo||dt.lastSizeC!=dt.wrapper.clientHeight;if(dn){dt.lastSizeC=dt.wrapper.clientHeight}dt.showingFrom=ds;dt.showingTo=dd;bp(dh,100);var dg=dt.lineDiv.offsetTop;for(var dr=dt.lineDiv.firstChild,dp;dr;dr=dr.nextSibling){if(dr.lineObj){if(bN){var dl=dr.offsetTop+dr.offsetHeight;dp=dl-dg;dg=dl}else{var di=dr.getBoundingClientRect();dp=di.bottom-di.top}var dk=dr.lineObj.height-dp;if(dp<2){dp=bB(dt)}if(dk>0.001||dk<-0.001){aA(dr.lineObj,dp)}}}dt.viewOffset=bQ(dh,cM(dy,ds));dt.mover.style.top=dt.viewOffset+"px";return true}function bW(dl,dj){for(var dg=0,de=dj.length||0;dg<de;++dg){var di=dj[dg],dc=[],dk=di.diff||0;for(var df=0,dd=dl.length;df<dd;++df){var dh=dl[df];if(di.to<=dh.from&&di.diff){dc.push({from:dh.from+dk,to:dh.to+dk})}else{if(di.to<=dh.from||di.from>=dh.to){dc.push(dh)}else{if(di.from>dh.from){dc.push({from:dh.from,to:di.from})}if(di.to<dh.to){dc.push({from:di.to+dk,to:dh.to+dk})}}}}dl=dc}return dl}function cl(dc){var dg=dc.display,df={},de={};for(var dh=dg.gutters.firstChild,dd=0;dh;dh=dh.nextSibling,++dd){df[dc.options.gutters[dd]]=dh.offsetLeft;de[dc.options.gutters[dd]]=dh.offsetWidth}return{fixedPos:c8(dg),gutterTotalWidth:dg.gutters.offsetWidth,gutterLeft:df,gutterWidth:de,wrapperWidth:dg.wrapper.clientWidth}}function ac(dl,di,dj,dp,de){var dk=cl(dl);var dh=dl.display,dn=dl.options.lineNumbers;if(!dp.length&&!ad&&(!I||!dl.display.currentWheelTarget)){ck(dh.lineDiv)}var dc=dh.lineDiv,dm=dc.firstChild;function dg(dr){var dq=dr.nextSibling;if(I&&aN&&dl.display.currentWheelTarget==dr){dr.style.display="none";dr.lineObj=null}else{dc.removeChild(dr)}return dq}var df=dp.shift(),dd=di;dl.view.doc.iter(di,dj,function(dq){if(df&&df.to==dd){df=dp.shift()}if(aU(dq)){if(dq.height!=0){aA(dq,0)}}else{if(df&&df.from<=dd&&df.to>dd){while(dm.lineObj!=dq){dm=dg(dm)}if(dn&&de<=dd&&dm.lineNumber){aI(dm.lineNumber,ct(dl.options,dd))}dm=dm.nextSibling}else{var dr=aw(dl,dq,dd,dk);dc.insertBefore(dr,dm);dr.lineObj=dq}}++dd});while(dm){dm=dg(dm)}}function aw(dr,dt,dg,dq){var di=by(dr,dt);var dj=dt.gutterMarkers,dp=dr.display;if(!dr.options.lineNumbers&&!dj&&!dt.bgClass&&!dt.wrapClass&&(!dt.widgets||!dt.widgets.length)){return di}var de=bm("div",null,dt.wrapClass,"position: relative");if(dr.options.lineNumbers||dj){var dm=de.appendChild(bm("div",null,null,"position: absolute; left: "+dq.fixedPos+"px"));de.alignable=[dm];if(dr.options.lineNumbers&&(!dj||!dj["CodeMirror-linenumbers"])){de.lineNumber=dm.appendChild(bm("div",ct(dr.options,dg),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dq.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+dp.lineNumInnerWidth+"px"))}if(dj){for(var dh=0;dh<dr.options.gutters.length;++dh){var dd=dr.options.gutters[dh],ds=dj.hasOwnProperty(dd)&&dj[dd];if(ds){dm.appendChild(bm("div",[ds],"CodeMirror-gutter-elt","left: "+dq.gutterLeft[dd]+"px; width: "+dq.gutterWidth[dd]+"px"))}}}}if(dt.bgClass){de.appendChild(bm("div","\u00a0",dt.bgClass+" CodeMirror-linebackground"))}de.appendChild(di);if(dt.widgets){for(var dk=0,dn=dt.widgets;dk<dn.length;++dk){var dl=dn[dk],df=bm("div",[dl.node],"CodeMirror-linewidget");df.widget=dl;if(dl.noHScroll){(de.alignable||(de.alignable=[])).push(df);var dc=dq.wrapperWidth;df.style.left=dq.fixedPos+"px";if(!dl.coverGutter){dc-=dq.gutterTotalWidth;df.style.paddingLeft=dq.gutterTotalWidth+"px"}df.style.width=dc+"px"}if(dl.coverGutter){df.style.zIndex=5;df.style.position="relative";if(!dl.noHScroll){df.style.marginLeft=-dq.gutterTotalWidth+"px"}}if(dl.above){de.insertBefore(df,dr.options.lineNumbers&&dt.height!=0?dm:di)}else{de.appendChild(df)}}}if(bN){de.style.zIndex=2}return de}function c7(dc){var df=dc.display;var dg=n(dc.view.sel.from,dc.view.sel.to);if(dg||dc.options.showCursorWhenSelecting){c9(dc)}else{df.cursor.style.display=df.otherCursor.style.display="none"}if(!dg){ba(dc)}else{df.selectionDiv.style.display="none"}var dh=bw(dc,dc.view.sel.head,"div");var dd=df.wrapper.getBoundingClientRect(),de=df.lineDiv.getBoundingClientRect();df.inputDiv.style.top=Math.max(0,Math.min(df.wrapper.clientHeight-10,dh.top+de.top-dd.top))+"px";df.inputDiv.style.left=Math.max(0,Math.min(df.wrapper.clientWidth-10,dh.left+de.left-dd.left))+"px"}function c9(dc){var dd=dc.display,de=bw(dc,dc.view.sel.head,"div");dd.cursor.style.left=de.left+"px";dd.cursor.style.top=de.top+"px";dd.cursor.style.height=Math.max(0,de.bottom-de.top)*dc.options.cursorHeight+"px";dd.cursor.style.display="";if(de.other){dd.otherCursor.style.display="";dd.otherCursor.style.left=de.other.left+"px";dd.otherCursor.style.top=de.other.top+"px";dd.otherCursor.style.height=(de.other.bottom-de.other.top)*0.85+"px"}else{dd.otherCursor.style.display="none"}}function ba(dg){var dn=dg.display,dv=dg.view.doc,dm=dg.view.sel;var dc=document.createDocumentFragment();var dq=dn.lineSpace.offsetWidth,dr=aG(dg.display);function di(dz,dy,dx,dw){if(dy<0){dy=0}dc.appendChild(bm("div",null,"CodeMirror-selected","position: absolute; left: "+dz+"px; top: "+dy+"px; width: "+(dx==null?dq-dz:dx)+"px; height: "+(dw-dy)+"px"))}function de(dw,dz,dD,dC){var dx=cM(dv,dw);var dA=dx.text.length,dy=dC?Infinity:-Infinity;function dB(dE){return cQ(dg,{line:dw,ch:dE},"div",dx)}cU(bZ(dx),dz||0,dD==null?dA:dD,function(dK,dJ,dE){var dG=dB(dE=="rtl"?dJ-1:dK);var dH=dB(dE=="rtl"?dK:dJ-1);var dI=dG.left,dF=dH.right;if(dH.top-dG.top>3){di(dI,dG.top,null,dG.bottom);dI=dr;if(dG.bottom<dH.top){di(dI,dG.bottom,null,dH.top)}}if(dD==null&&dJ==dA){dF=dq}if(dz==null&&dK==0){dI=dr}dy=dC?Math.min(dH.top,dy):Math.max(dH.bottom,dy);if(dI<dr+1){dI=dr}di(dI,dH.top,dF-dI,dH.bottom)});return dy}if(dm.from.line==dm.to.line){de(dm.from.line,dm.from.ch,dm.to.ch)}else{var du=cM(dv,dm.from.line);var df=du,ds,dk=[dm.from.line,dm.from.ch],dd;while(ds=C(df)){var dh=ds.find();dk.push(dh.from.ch,dh.to.line,dh.to.ch);if(dh.to.line==dm.to.line){dk.push(dm.to.ch);dd=true;break}df=cM(dv,dh.to.line)}if(dd){for(var dp=0;dp<dk.length;dp+=3){de(dk[dp],dk[dp+1],dk[dp+2])}}else{var dl,dj,dt=cM(dv,dm.to.line);if(dm.from.ch){dl=de(dm.from.line,dm.from.ch,null,false)}else{dl=bQ(dg,du)-dn.viewOffset}if(!dm.to.ch){dj=bQ(dg,dt)-dn.viewOffset}else{dj=de(dm.to.line,cR(dt)?null:0,dm.to.ch,true)}if(dl<dj){di(dr,dl,null,dj)}}}cq(dn.selectionDiv,dc);dn.selectionDiv.style.display=""}function cV(dc){var de=dc.display;clearInterval(de.blinker);var dd=true;de.cursor.style.visibility=de.otherCursor.style.visibility="";de.blinker=setInterval(function(){if(!de.cursor.offsetHeight){return}de.cursor.style.visibility=de.otherCursor.style.visibility=(dd=!dd)?"":"hidden"},dc.options.cursorBlinkRate)}function bp(dc,dd){if(dc.view.frontier<dc.display.showingTo){dc.view.highlight.set(dd,bG(bL,dc))}}function bL(dc){var de=dc.view,dg=de.doc;if(de.frontier>=dc.display.showingTo){return}var dd=+new Date+dc.options.workTime;var df=f(de.mode,cB(dc,de.frontier));var di=[],dh;dg.iter(de.frontier,Math.min(dg.size,dc.display.showingTo+500),function(dj){if(de.frontier>=dc.display.showingFrom){if(a(dc,dj,df)&&de.frontier>=dc.display.showingFrom){if(dh&&dh.end==de.frontier){dh.end++}else{di.push(dh={start:de.frontier,end:de.frontier+1})}}dj.stateAfter=f(de.mode,df)}else{bS(dc,dj,df);dj.stateAfter=de.frontier%5==0?f(de.mode,df):null}++de.frontier;if(+new Date>dd){bp(dc,dc.options.workDelay);return true}});if(di.length){i(dc,function(){for(var dj=0;dj<di.length;++dj){bv(this,di[dj].start,di[dj].end)}})()}}function aH(dh,dc){var dd,df,dg=dh.view.doc;for(var dj=dc,de=dc-100;dj>de;--dj){if(dj==0){return 0}var dk=cM(dg,dj-1);if(dk.stateAfter){return dj}var di=c6(dk.text,null,dh.options.tabSize);if(df==null||dd>di){df=dj-1;dd=di}}return df}function cB(dc,dg){var dd=dc.view;var df=aH(dc,dg),de=df&&cM(dd.doc,df-1).stateAfter;if(!de){de=aK(dd.mode)}else{de=f(dd.mode,de)}dd.doc.iter(df,dg,function(dh){bS(dc,dh,de);var di=df==dg-1||df%5==0||df>=dd.showingFrom&&df<dd.showingTo;dh.stateAfter=di?f(dd.mode,de):null;++df});return de}function cz(dc){return dc.lineSpace.offsetTop}function aG(dd){var dc=cq(dd.measure,bm("pre")).appendChild(bm("span","x"));return dc.offsetLeft}function au(dc,dd,df,dh){var dh=dh||b7(dc,dd),de=-1;for(var di=df;;di+=de){var dg=dh[di];if(dg){break}if(de<0&&di==0){de=1}}return{left:di<df?dg.right:dg.left,right:di>df?dg.left:dg.right,top:dg.top,bottom:dg.bottom}}function b7(dc,dd){var di=dc.display,df=dc.display.measureLineCache;for(var dg=0;dg<df.length;++dg){var de=df[dg];if(de.text==dd.text&&de.markedSpans==dd.markedSpans&&di.scroller.clientWidth==de.width){return de.measure}}var dh=av(dc,dd);var de={text:dd.text,width:di.scroller.clientWidth,markedSpans:dd.markedSpans,measure:dh};if(df.length==16){df[++di.measureLineCachePos%16]=de}else{df.push(de)}return dh}function av(dh,dj){var dv=dh.display,dg=c2(dj.text.length);var ds=by(dh,dj,dg);if(ad&&!bN&&!dh.options.lineWrapping&&ds.childNodes.length>100){var de=document.createDocumentFragment();var dk=10,dt=ds.childNodes.length;for(var dx=0,dm=Math.ceil(dt/dk);dx<dm;++dx){var di=bm("div",null,null,"display: inline-block");for(var dw=0;dw<dk&&dt;++dw){di.appendChild(ds.firstChild);--dt}de.appendChild(di)}ds.appendChild(de)}cq(dv.measure,ds);var dd=dv.lineDiv.getBoundingClientRect();var dc=[],dz=c2(dj.text.length),dy=ds.offsetHeight;for(var dx=0,df;dx<dg.length;++dx){if(df=dg[dx]){var dr=df.getBoundingClientRect();var dq=Math.max(0,dr.top-dd.top),dn=Math.min(dr.bottom-dd.top,dy);for(var dw=0;dw<dc.length;dw+=2){var dp=dc[dw],dl=dc[dw+1];if(dp>dn||dl<dq){continue}if(dp<=dq&&dl>=dn||dq<=dp&&dn>=dl||Math.min(dn,dl)-Math.max(dq,dp)>=(dn-dq)>>1){dc[dw]=Math.min(dq,dp);dc[dw+1]=Math.max(dn,dl);break}}if(dw==dc.length){dc.push(dq,dn)}dz[dx]={left:dr.left-dd.left,right:dr.right-dd.left,top:dw}}}for(var dx=0,df;dx<dz.length;++dx){if(df=dz[dx]){var du=df.top;df.top=dc[du];df.bottom=dc[du+1]}}return dz}function cr(dc){dc.display.measureLineCache.length=dc.display.measureLineCachePos=0;dc.display.cachedCharWidth=dc.display.cachedTextHeight=null;dc.view.maxLineChanged=true}function w(di,df,dh,dd){if(df.widgets){for(var de=0;de<df.widgets.length;++de){if(df.widgets[de].above){var dk=df.widgets[de].node.offsetHeight;dh.top+=dk;dh.bottom+=dk}}}if(dd=="line"){return dh}if(!dd){dd="local"}var dg=bQ(di,df);if(dd!="local"){dg-=di.display.viewOffset}if(dd=="page"){var dc=di.display.lineSpace.getBoundingClientRect();dg+=dc.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var dj=dc.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);dh.left+=dj;dh.right+=dj}dh.top+=dg;dh.bottom+=dg;return dh}function cQ(dc,df,de,dd){if(!dd){dd=cM(dc.view.doc,df.line)}return w(dc,dd,au(dc,dd,df.ch),de)}function bw(dl,di,de,dd,dn){dd=dd||cM(dl.view.doc,di.line);if(!dn){dn=b7(dl,dd)}function dt(dx,dw){var dv=au(dl,dd,dx,dn);if(dw){dv.left=dv.right}else{dv.right=dv.left}return w(dl,dd,dv,de)}var dq=bZ(dd),dm=di.ch;if(!dq){return dt(dm)}var dj,dh,du=dq[0].level;for(var dr=0;dr<dq.length;++dr){var dp=dq[dr],dg=dp.level%2,dk,dc;if(dp.from<dm&&dp.to>dm){return dt(dm,dg)}var df=dg?dp.to:dp.from,ds=dg?dp.from:dp.to;if(df==dm){if(dr&&dp.level<(dk=dq[dr-1]).level){dc=dt(dk.level%2?dk.from:dk.to-1,true)}else{dc=dt(dg&&dp.from!=dp.to?dm-1:dm)}if(dg==du){dj=dc}else{dh=dc}}else{if(ds==dm){var dk=dr<dq.length-1&&dq[dr+1];if(!dg&&dk&&dk.from==dk.to){continue}if(dk&&dp.level<dk.level){dc=dt(dk.level%2?dk.to-1:dk.from)}else{dc=dt(dg?dm:dm-1,true)}if(dg==du){dj=dc}else{dh=dc}}}}if(du&&!dm){dh=dt(dq[0].to-1)}if(!dj){return dh}if(dh){dj.other=dh}return dj}function bq(de,dd,dj){var dh=de.view.doc;dj+=de.display.viewOffset;if(dj<0){return{line:0,ch:0,outside:true}}var di=aS(dh,dj);if(di>=dh.size){return{line:dh.size-1,ch:cM(dh,dh.size-1).text.length}}if(dd<0){dd=0}for(;;){var df=cM(dh,di);var dg=ar(de,df,di,dd,dj);var dc=C(df);if(dc&&dg.ch==ch(df)){di=dc.find().to.line}else{return dg}}}function ar(dk,dd,dn,dm,dl){var dj=dl-bQ(dk,dd);var dh=false,dy=dk.display.wrapper.clientWidth;var dt=b7(dk,dd);function dw(dz){var dA=bw(dk,{line:dn,ch:dz},"line",dd,dt);dh=true;if(dj>dA.bottom){return Math.max(0,dA.left-dy)}else{if(dj<dA.top){return dA.left+dy}else{dh=false}}return dA.left}var dq=bZ(dd),ds=dd.text.length;var du=a6(dd),de=ch(dd);var dr=aG(dk.display),dc=dw(de);if(dm>dc){return{line:dn,ch:de,outside:dh}}for(;;){if(dq?de==du||de==bA(dd,du,1):de-du<=1){var dg=dm-dr<dc-dm,dp=dg?du:de;while(b0.test(dd.text.charAt(dp))){++dp}return{line:dn,ch:dp,after:dg,outside:dh}}var di=Math.ceil(ds/2),dx=du+di;if(dq){dx=du;for(var dv=0;dv<di;++dv){dx=bA(dd,dx,1)}}var df=dw(dx);if(df>dm){de=dx;dc=df;if(dh){dc+=1000}ds-=di}else{du=dx;dr=df;ds=di}}}var bO;function bB(de){if(de.cachedTextHeight!=null){return de.cachedTextHeight}if(bO==null){bO=bm("pre");for(var dd=0;dd<49;++dd){bO.appendChild(document.createTextNode("x"));bO.appendChild(bm("br"))}bO.appendChild(document.createTextNode("x"))}cq(de.measure,bO);var dc=bO.offsetHeight/50;if(dc>3){de.cachedTextHeight=dc}ck(de.measure);return dc||1}function aO(df){if(df.cachedCharWidth!=null){return df.cachedCharWidth}var dc=bm("span","x");var de=bm("pre",[dc]);cq(df.measure,de);var dd=dc.offsetWidth;if(dd>2){df.cachedCharWidth=dd}return dd||10}function R(dc){if(dc.curOp){++dc.curOp.depth}else{dc.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,updateMaxLine:false,id:++dc.nextOpId}}}function x(dk){var dg=dk.curOp;if(--dg.depth){return}dk.curOp=null;var di=dk.view,dh=dk.display;if(dg.updateMaxLine){bg(di)}if(di.maxLineChanged&&!dk.options.lineWrapping){var dc=au(dk,di.maxLine,di.maxLine.text.length).right;dh.sizer.style.minWidth=(dc+3+cA)+"px";di.maxLineChanged=false}var dd,df;if(dg.selectionChanged){var dj=bw(dk,di.sel.head);dd=am(dk,dj.left,dj.top,dj.left,dj.bottom)}if(dg.changes.length||dd&&dd.scrollTop!=null){df=cg(dk,dg.changes,dd&&dd.scrollTop)}if(!df&&dg.selectionChanged){c7(dk)}if(dd){ci(dk)}if(dg.selectionChanged){cV(dk)}if(di.focused&&dg.updateInput){cG(dk,dg.userSelChange)}if(dg.textChanged){X(dk,"change",dk,dg.textChanged)}if(dg.selectionChanged){X(dk,"cursorActivity",dk)}for(var de=0;de<dg.delayedCallbacks.length;++de){dg.delayedCallbacks[de](dk)}}function i(dc,dd){return function(){var df=dc||this;R(df);try{var de=dd.apply(df,arguments)}finally{x(df)}return de}}function bv(dc,df,de,dd){dc.curOp.changes.push({from:df,to:de,diff:dd})}function d(dc){if(dc.view.pollingFast){return}dc.display.poll.set(dc.options.pollInterval,function(){bt(dc);if(dc.view.focused){d(dc)}})}function Y(dc){var dd=false;dc.display.pollingFast=true;function de(){var df=bt(dc);if(!df&&!dd){dd=true;dc.display.poll.set(60,de)}else{dc.display.pollingFast=false;d(dc)}}dc.display.poll.set(20,de)}function bt(dl){var di=dl.display.input,de=dl.display.prevInput,dg=dl.view,dc=dg.sel;if(!dg.focused||b6(di)||y(dl)){return false}var dm=di.value;if(dm==de&&n(dc.from,dc.to)){return false}R(dl);dg.sel.shift=false;var dh=0,dd=Math.min(de.length,dm.length);while(dh<dd&&de[dh]==dm[dh]){++dh}var dk=dc.from,dj=dc.to;if(dh<de.length){dk={line:dk.line,ch:dk.ch-(de.length-dh)}}else{if(dg.overwrite&&n(dk,dj)&&!dl.display.pasteIncoming){dj={line:dj.line,ch:Math.min(cM(dl.view.doc,dj.line).text.length,dj.ch+(dm.length-dh))}}}var df=dl.curOp.updateInput;cC(dl,dk,dj,cp(dm.slice(dh)),"end",dl.display.pasteIncoming?"paste":"input",{from:dk,to:dj});dl.curOp.updateInput=df;if(dm.length>1000){di.value=dl.display.prevInput=""}else{dl.display.prevInput=dm}x(dl);dl.display.pasteIncoming=false;return true}function cG(dc,df){var de=dc.view,dd,dg;if(!n(de.sel.from,de.sel.to)){dc.display.prevInput="";dd=bk&&(de.sel.to.line-de.sel.from.line>100||(dg=dc.getSelection()).length>1000);if(dd){dc.display.input.value="-"}else{dc.display.input.value=dg||dc.getSelection()}if(de.focused){bu(dc.display.input)}}else{if(df){dc.display.prevInput=dc.display.input.value=""}}dc.display.inaccurateSelection=dd}function bj(dc){if(dc.options.readOnly!="nocursor"&&(ad||document.activeElement!=dc.display.input)){dc.display.input.focus()}}function y(dc){return dc.options.readOnly||dc.view.cantEdit}function p(dc){var dg=dc.display;b8(dg.scroller,"mousedown",i(dc,cm));b8(dg.scroller,"dblclick",i(dc,Q));b8(dg.lineSpace,"selectstart",function(di){if(!b2(dg,di)){Q(di)}});if(!a8){b8(dg.scroller,"contextmenu",function(di){ay(dc,di)})}b8(dg.scroller,"scroll",function(){cj(dc,dg.scroller.scrollTop);P(dc,dg.scroller.scrollLeft,true);X(dc,"scroll",dc)});b8(dg.scrollbarV,"scroll",function(){cj(dc,dg.scrollbarV.scrollTop)});b8(dg.scrollbarH,"scroll",function(){P(dc,dg.scrollbarH.scrollLeft)});b8(dg.scroller,"mousewheel",function(di){b3(dc,di)});b8(dg.scroller,"DOMMouseScroll",function(di){b3(dc,di)});function dh(){if(dc.view.focused){setTimeout(bG(bj,dc),0)}}b8(dg.scrollbarH,"mousedown",dh);b8(dg.scrollbarV,"mousedown",dh);b8(dg.wrapper,"scroll",function(){dg.wrapper.scrollTop=dg.wrapper.scrollLeft=0});b8(window,"resize",function de(){dg.cachedCharWidth=dg.cachedTextHeight=null;cr(dc);if(dg.wrapper.parentNode){cg(dc,true)}else{c3(window,"resize",de)}});b8(dg.input,"keyup",i(dc,function(di){if(dc.options.onKeyEvent&&dc.options.onKeyEvent(dc,j(di))){return}if(S(di,"keyCode")==16){dc.view.sel.shift=false}}));b8(dg.input,"input",bG(Y,dc));b8(dg.input,"keydown",i(dc,ce));b8(dg.input,"keypress",i(dc,aW));b8(dg.input,"focus",bG(c5,dc));b8(dg.input,"blur",bG(H,dc));function dd(di){if(dc.options.onDragEvent&&dc.options.onDragEvent(dc,j(di))){return}cw(di)}if(dc.options.dragDrop){b8(dg.scroller,"dragstart",function(di){J(dc,di)});b8(dg.scroller,"dragenter",dd);b8(dg.scroller,"dragover",dd);b8(dg.scroller,"drop",i(dc,e))}b8(dg.scroller,"paste",function(){bj(dc);Y(dc)});b8(dg.input,"paste",function(){dg.pasteIncoming=true;Y(dc)});function df(){if(dg.inaccurateSelection){dg.prevInput="";dg.inaccurateSelection=false;dg.input.value=dc.getSelection();bu(dg.input)}}b8(dg.input,"cut",df);b8(dg.input,"copy",df);if(U){b8(dg.sizer,"mouseup",function(){if(document.activeElement==dg.input){dg.input.blur()}bj(dc)})}}function b2(dd,dc){for(var de=bz(dc);de!=dd.wrapper;de=de.parentNode){if(/\bCodeMirror-(?:line)?widget\b/.test(de.className)||de.parentNode==dd.sizer&&de!=dd.mover){return true}}}function aB(dd,di,df){var dh=dd.display;if(!df){var dg=bz(di);if(dg==dh.scrollbarH||dg==dh.scrollbarH.firstChild||dg==dh.scrollbarV||dg==dh.scrollbarV.firstChild||dg==dh.scrollbarFiller){return null}}var dc,dj,de=dh.lineSpace.getBoundingClientRect();try{dc=di.clientX;dj=di.clientY}catch(di){return null}return bq(dd,dc-de.left,dj-de.top)}var a2,aq;function cm(dv){var df=this,dq=df.display,dj=df.view,dp=dj.sel,dx=dj.doc;dp.shift=S(dv,"shiftKey");if(b2(dq,dv)){if(!I){dq.scroller.draggable=false;setTimeout(function(){dq.scroller.draggable=true},100)}return}if(W(df,dv)){return}var de=aB(df,dv);switch(az(dv)){case 3:if(a8){ay.call(df,df,dv)}return;case 2:if(de){cZ(df,de)}setTimeout(bG(bj,df),20);Q(dv);return}if(!de){if(bz(dv)==dq.scroller){Q(dv)}return}if(!dj.focused){c5(df)}var dc=+new Date,dd="single";if(aq&&aq.time>dc-400&&n(aq.pos,de)){dd="triple";Q(dv);setTimeout(bG(bj,df),20);L(df,de.line)}else{if(a2&&a2.time>dc-400&&n(a2.pos,de)){dd="double";aq={time:dc,pos:de};Q(dv);var ds=a7(cM(dx,de.line).text,de);cZ(df,ds.from,ds.to)}else{a2={time:dc,pos:de}}}var dg=de;if(df.options.dragDrop&&b4&&!y(df)&&!n(dp.from,dp.to)&&!z(de,dp.from)&&!z(dp.to,de)&&dd=="single"){var dr=i(df,function(dy){if(I){dq.scroller.draggable=false}dj.draggingText=false;c3(document,"mouseup",dr);c3(dq.scroller,"drop",dr);if(Math.abs(dv.clientX-dy.clientX)+Math.abs(dv.clientY-dy.clientY)<10){Q(dy);cZ(df,de);bj(df)}});if(I){dq.scroller.draggable=true}dj.draggingText=dr;if(dq.scroller.dragDrop){dq.scroller.dragDrop()}b8(document,"mouseup",dr);b8(dq.scroller,"drop",dr);return}Q(dv);if(dd=="single"){cZ(df,ae(dx,de))}var dw=dp.from,dl=dp.to;function dt(dz){if(dd=="single"){cZ(df,ae(dx,de),dz);return}dw=ae(dx,dw);dl=ae(dx,dl);if(dd=="double"){var dy=a7(cM(dx,dz.line).text,dz);if(z(dz,dw)){cZ(df,dy.from,dl)}else{cZ(df,dw,dy.to)}}else{if(dd=="triple"){if(z(dz,dw)){cZ(df,dl,ae(dx,{line:dz.line,ch:0}))}else{cZ(df,dw,ae(dx,{line:dz.line+1,ch:0}))}}}}var dm=dq.wrapper.getBoundingClientRect();var dh=0;function du(dA){var dy=++dh;var dC=aB(df,dA,true);if(!dC){return}if(!n(dC,dg)){if(!dj.focused){c5(df)}dg=dC;dt(dC);var dB=bl(dq,dx);if(dC.line>=dB.to||dC.line<dB.from){setTimeout(i(df,function(){if(dh==dy){du(dA)}}),150)}}else{var dz=dA.clientY<dm.top?-20:dA.clientY>dm.bottom?20:0;if(dz){setTimeout(i(df,function(){if(dh!=dy){return}dq.scroller.scrollTop+=dz;du(dA)}),50)}}}function dk(dy){dh=Infinity;var dz=aB(df,dy);if(dz){dt(dz)}Q(dy);bj(df);c3(document,"mousemove",dn);c3(document,"mouseup",di)}var dn=i(df,function(dy){if(!ad&&!az(dy)){dk(dy)}else{du(dy)}});var di=i(df,dk);b8(document,"mousemove",dn);b8(document,"mouseup",di)}function e(di){var dk=this;if(dk.options.onDragEvent&&dk.options.onDragEvent(dk,j(di))){return}Q(di);var dj=aB(dk,di,true),dc=di.dataTransfer.files;if(!dj||y(dk)){return}if(dc&&dc.length&&window.FileReader&&window.File){var de=dc.length,dm=Array(de),dd=0;var df=function(dq,dp){var dn=new FileReader;dn.onload=function(){dm[dp]=dn.result;if(++dd==de){dj=ae(dk.view.doc,dj);i(dk,function(){var dr=bD(dk,dm.join(""),dj,dj,"paste");bf(dk,dj,dr)})()}};dn.readAsText(dq)};for(var dg=0;dg<de;++dg){df(dc[dg],dg)}}else{if(dk.view.draggingText&&!(z(dj,dk.view.sel.from)||z(dk.view.sel.to,dj))){dk.view.draggingText(di);if(ad){setTimeout(bG(bj,dk),50)}return}try{var dm=di.dataTransfer.getData("Text");if(dm){var dl=dk.view.sel.from,dh=dk.view.sel.to;bf(dk,dj,dj);if(dk.view.draggingText){bD(dk,"",dl,dh,"paste")}dk.replaceSelection(dm,null,"paste");bj(dk);c5(dk)}}catch(di){}}}function W(dk,di){var dj=dk.display;try{var dd=di.clientX,dc=di.clientY}catch(di){return false}if(dd>=Math.floor(dj.gutters.getBoundingClientRect().right)){return false}Q(di);if(!s(dk,"gutterClick")){return true}var dh=dj.lineDiv.getBoundingClientRect();if(dc>dh.bottom){return true}dc-=dh.top-dj.viewOffset;for(var df=0;df<dk.options.gutters.length;++df){var dg=dj.gutters.childNodes[df];if(dg&&dg.getBoundingClientRect().right>=dd){var dl=aS(dk.view.doc,dc);var de=dk.options.gutters[df];bP(dk,dk,"gutterClick",dk,dl,de,di);break}}return true}function J(dd,de){var dc=dd.getSelection();de.dataTransfer.setData("Text",dc);if(de.dataTransfer.setDragImage&&!bd){de.dataTransfer.setDragImage(bm("img"),0,0)}}function cj(dc,dd){if(Math.abs(dc.view.scrollTop-dd)<2){return}dc.view.scrollTop=dd;if(!a8){cg(dc,[],dd)}if(dc.display.scroller.scrollTop!=dd){dc.display.scroller.scrollTop=dd}if(dc.display.scrollbarV.scrollTop!=dd){dc.display.scrollbarV.scrollTop=dd}if(a8){cg(dc,[])}}function P(dc,de,dd){if(dd?de==dc.view.scrollLeft:Math.abs(dc.view.scrollLeft-de)<2){return}dc.view.scrollLeft=de;V(dc);if(dc.display.scroller.scrollLeft!=de){dc.display.scroller.scrollLeft=de}if(dc.display.scrollbarH.scrollLeft!=de){dc.display.scrollbarH.scrollLeft=de}}var cI=0,cv,cu,aZ,aX,cn=null;if(ad){cn=-0.53}else{if(a8){cn=15}else{if(ao){cn=-0.7}else{if(bd){cn=-1/3}}}}function b3(dh,dd){var dk=dd.wheelDeltaX,dj=dd.wheelDeltaY;if(dk==null&&dd.detail&&dd.axis==dd.HORIZONTAL_AXIS){dk=dd.detail}if(dj==null&&dd.detail&&dd.axis==dd.VERTICAL_AXIS){dj=dd.detail}else{if(dj==null){dj=dd.wheelDelta}}if(dj&&aN&&I){for(var di=dd.target;di!=dg;di=di.parentNode){if(di.lineObj){dh.display.currentWheelTarget=di;break}}}var dg=dh.display.scroller;if(dk&&!a8&&!q&&cn!=null){if(dj){cj(dh,Math.max(0,Math.min(dg.scrollTop+dj*cn,dg.scrollHeight-dg.clientHeight)))}P(dh,Math.max(0,Math.min(dg.scrollLeft+dk*cn,dg.scrollWidth-dg.clientWidth)));Q(dd);aZ=null;return}if(dj&&cn!=null){var dc=dj*cn;var df=dh.view.scrollTop,de=df+dh.display.wrapper.clientHeight;if(dc<0){df=Math.max(0,df+dc-50)}else{de=Math.min(dh.view.doc.height,de+dc+50)}cg(dh,[],{top:df,bottom:de})}if(cI<20){if(aZ==null){aZ=dg.scrollLeft;aX=dg.scrollTop;cv=dk;cu=dj;setTimeout(function(){if(aZ==null){return}var dl=dg.scrollLeft-aZ;var dn=dg.scrollTop-aX;var dm=(dn&&cu&&dn/cu)||(dl&&cv&&dl/cv);aZ=aX=null;if(!dm){return}cn=(cn*cI+dm)/(cI+1);++cI},200)}else{cv+=dk;cu+=dj}}}function aP(dd,dg,dc){if(typeof dg=="string"){dg=ak[dg];if(!dg){return false}}if(dd.display.pollingFast&&bt(dd)){dd.display.pollingFast=false}var de=dd.view,df=de.sel.shift;try{if(y(dd)){de.suppressEdits=true}if(dc){de.sel.shift=false}dg(dd)}catch(dh){if(dh!=aC){throw dh}return false}finally{de.sel.shift=df;de.suppressEdits=false}return true}function aY(dc){var dd=dc.view.keyMaps.slice(0);dd.push(dc.options.keyMap);if(dc.options.extraKeys){dd.unshift(dc.options.extraKeys)}return dd}var bn;function cT(dk,di){var dl=l(dk.options.keyMap),dg=dl.auto;clearTimeout(bn);if(dg&&!m(di)){bn=setTimeout(function(){if(l(dk.options.keyMap)==dl){dk.options.keyMap=(dg.call?dg.call(null,dk):dg)}},50)}var dd=A[S(di,"keyCode")],dh=false;var de=aN&&(q||bb);if(dd==null||di.altGraphKey){return false}if(S(di,"altKey")){dd="Alt-"+dd}if(S(di,de?"metaKey":"ctrlKey")){dd="Ctrl-"+dd}if(S(di,de?"ctrlKey":"metaKey")){dd="Cmd-"+dd}var dc=false;function dj(){dc=true}var df=aY(dk);if(S(di,"shiftKey")){dh=ah("Shift-"+dd,df,function(dm){return aP(dk,dm,true)},dj)||ah(dd,df,function(dm){if(typeof dm=="string"&&/^go[A-Z]/.test(dm)){return aP(dk,dm)}},dj)}else{dh=ah(dd,df,function(dm){return aP(dk,dm)},dj)}if(dc){dh=false}if(dh){Q(di);cV(dk);if(bM){di.oldKeyCode=di.keyCode;di.keyCode=0}}return dh}function bU(dc,df,dd){var de=ah("'"+dd+"'",aY(dc),function(dg){return aP(dc,dg,true)});if(de){Q(df);cV(dc)}return de}var cO=null;function ce(df){var dc=this;if(!dc.view.focused){c5(dc)}if(ad&&df.keyCode==27){df.returnValue=false}if(dc.options.onKeyEvent&&dc.options.onKeyEvent(dc,j(df))){return}var dd=S(df,"keyCode");dc.view.sel.shift=dd==16||S(df,"shiftKey");var de=cT(dc,df);if(q){cO=de?dd:null;if(!de&&dd==88&&!bk&&S(df,aN?"metaKey":"ctrlKey")){dc.replaceSelection("")}}}function aW(dg){var dc=this;if(dc.options.onKeyEvent&&dc.options.onKeyEvent(dc,j(dg))){return}var df=S(dg,"keyCode"),dd=S(dg,"charCode");if(q&&df==cO){cO=null;Q(dg);return}if(((q&&(!dg.which||dg.which<10))||U)&&cT(dc,dg)){return}var de=String.fromCharCode(dd==null?df:dd);if(this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!y(this)&&this.view.mode.electricChars.indexOf(de)>-1){setTimeout(i(dc,function(){bi(dc,dc.view.sel.to.line,"smart")}),75)}if(bU(dc,dg,de)){return}Y(dc)}function c5(dc){if(dc.options.readOnly=="nocursor"){return}if(!dc.view.focused){X(dc,"focus",dc);dc.view.focused=true;if(dc.display.scroller.className.search(/\bCodeMirror-focused\b/)==-1){dc.display.scroller.className+=" CodeMirror-focused"}cG(dc,true)}d(dc);cV(dc)}function H(dc){if(dc.view.focused){X(dc,"blur",dc);dc.view.focused=false;dc.display.scroller.className=dc.display.scroller.className.replace(" CodeMirror-focused","")}clearInterval(dc.display.blinker);setTimeout(function(){if(!dc.view.focused){dc.view.sel.shift=false}},150)}var a3;function ay(dk,df){var dh=dk.display,dd=dk.view.sel;var dj=aB(dk,df),dc=dh.scroller.scrollTop;if(!dj||q){return}if(n(dd.from,dd.to)||z(dj,dd.from)||!z(dj,dd.to)){i(dk,bf)(dk,dj,dj)}var dg=dh.input.style.cssText;dh.inputDiv.style.position="absolute";dh.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(df.clientY-5)+"px; left: "+(df.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";bj(dk);cG(dk,true);if(n(dd.from,dd.to)){dh.input.value=dh.prevInput=" "}function di(){dh.inputDiv.style.position="relative";dh.input.style.cssText=dg;if(bM){dh.scrollbarV.scrollTop=dh.scroller.scrollTop=dc}d(dk);if(dh.input.selectionStart!=null){clearTimeout(a3);var dm=dh.input.value=" "+(n(dd.from,dd.to)?"":dh.input.value),dl=0;dh.prevInput=" ";dh.input.selectionStart=1;dh.input.selectionEnd=dm.length;a3=setTimeout(function dn(){if(dh.prevInput==" "&&dh.input.selectionStart==0){i(dk,ak.selectAll)(dk)}else{if(dl++<10){a3=setTimeout(dn,500)}else{cG(dk)}}},200)}}if(a8){cw(df);b8(window,"mouseup",function de(){c3(window,"mouseup",de);setTimeout(di,20)})}else{setTimeout(di,50)}}function cC(dc,dj,di,dg,dh,dd){var df=ax&&ca(dc.view.doc,dj,di);if(df){for(var de=df.length-1;de>=1;--de){ap(dc,df[de].from,df[de].to,[""],dd)}if(df.length){return ap(dc,df[0].from,df[0].to,dg,dh,dd)}}else{return ap(dc,dj,di,dg,dh,dd)}}function ap(dn,dj,dk,dg,dh,dm){if(dn.view.suppressEdits){return}var di=dn.view,dl=di.doc,dd=[];dl.iter(dj.line,dk.line+1,function(dq){dd.push(ai(dq.text,dq.markedSpans))});var df=di.sel.from,de=di.sel.to;var dp=cY(cf(dd[0]),cf(aQ(dd)),dj.ch,dk.ch,dg);var dc=bE(dn,dj,dk,dp,dh,dm);if(di.history){cy(dn,dj.line,dg.length,dd,dm,df,de,di.sel.from,di.sel.to)}return dc}function cc(dl,dg){var dk=dl.view.doc,df=dl.view.history;var dj=(dg=="undo"?df.done:df.undone).pop();if(!dj){return}var dh={events:[],fromBefore:dj.fromAfter,toBefore:dj.toAfter,fromAfter:dj.fromBefore,toAfter:dj.toBefore};for(var de=dj.events.length-1;de>=0;de-=1){df.dirtyCounter+=dg=="undo"?-1:1;var di=dj.events[de];var dm=[],dd=di.start+di.added;dk.iter(di.start,dd,function(dn){dm.push(ai(dn.text,dn.markedSpans))});dh.events.push({start:di.start,added:di.old.length,old:dm});var dc=de?null:{from:dj.fromBefore,to:dj.toBefore};bE(dl,{line:di.start,ch:0},{line:dd-1,ch:cM(dk,dd-1).text.length},di.old,dc,dg)}(dg=="undo"?df.undone:df.done).push(dh)}function bE(dp,dv,de,dc,du,dC){var dr=dp.view,dD=dr.doc,dw=dp.display;if(dr.suppressEdits){return}var ds=de.line-dv.line,dq=cM(dD,dv.line),dd=cM(dD,de.line);var dA=false,dk=dv.line;if(!dp.options.lineWrapping){dk=k(at(dD,dq));dD.iter(dk,de.line+1,function(dE){if(bI(dD,dE)==dr.maxLineLength){dA=true;return true}})}var dl=aQ(dc),dm=bB(dw);if(dv.ch==0&&de.ch==0&&u(dl)==""){var dn=[];for(var dx=0,dz=dc.length-1;dx<dz;++dx){dn.push(a9(u(dc[dx]),cf(dc[dx]),dm))}an(dp,dd,dd.text,cf(dl));if(ds){dD.remove(dv.line,ds,dp)}if(dn.length){dD.insert(dv.line,dn)}}else{if(dq==dd){if(dc.length==1){an(dp,dq,dq.text.slice(0,dv.ch)+u(dc[0])+dq.text.slice(de.ch),cf(dc[0]))}else{for(var dn=[],dx=1,dz=dc.length-1;dx<dz;++dx){dn.push(a9(u(dc[dx]),cf(dc[dx]),dm))}dn.push(a9(u(dl)+dq.text.slice(de.ch),cf(dl),dm));an(dp,dq,dq.text.slice(0,dv.ch)+u(dc[0]),cf(dc[0]));dD.insert(dv.line+1,dn)}}else{if(dc.length==1){an(dp,dq,dq.text.slice(0,dv.ch)+u(dc[0])+dd.text.slice(de.ch),cf(dc[0]));dD.remove(dv.line+1,ds,dp)}else{var dn=[];an(dp,dq,dq.text.slice(0,dv.ch)+u(dc[0]),cf(dc[0]));an(dp,dd,u(dl)+dd.text.slice(de.ch),cf(dl));for(var dx=1,dz=dc.length-1;dx<dz;++dx){dn.push(a9(u(dc[dx]),cf(dc[dx]),dm))}if(ds>1){dD.remove(dv.line+1,ds-1,dp)}dD.insert(dv.line+1,dn)}}}if(dp.options.lineWrapping){var dg=Math.max(5,dw.scroller.clientWidth/aO(dw)-3);dD.iter(dv.line,dv.line+dc.length,function(dE){if(dE.height==0){return}var dF=(Math.ceil(dE.text.length/dg)||1)*dm;if(dF!=dE.height){aA(dE,dF)}})}else{dD.iter(dk,dv.line+dc.length,function(dF){var dE=bI(dD,dF);if(dE>dr.maxLineLength){dr.maxLine=dF;dr.maxLineLength=dE;dr.maxLineChanged=true;dA=false}});if(dA){dp.curOp.updateMaxLine=true}}dr.frontier=Math.min(dr.frontier,dv.line);bp(dp,400);var dj=dc.length-ds-1;bv(dp,dv.line,de.line+1,dj);if(s(dp,"change")){for(var dx=0;dx<dc.length;++dx){if(typeof dc[dx]!="string"){dc[dx]=dc[dx].text}}var di={from:dv,to:de,text:dc,origin:dC};if(dp.curOp.textChanged){for(var df=dp.curOp.textChanged;df.next;df=df.next){}df.next=di}else{dp.curOp.textChanged=di}}var dt,dy,dh={line:dv.line+dc.length-1,ch:u(dl).length+(dc.length==1?dv.ch:0)};if(du&&typeof du!="string"){if(du.from){dt=du.from;dy=du.to}else{dt=dy=du}}else{if(du=="end"){dt=dy=dh}else{if(du=="start"){dt=dy=dv}else{if(du=="around"){dt=dv;dy=dh}else{var dB=function(dG){if(z(dG,dv)){return dG}if(!z(de,dG)){return dh}var dE=dG.line+dj;var dF=dG.ch;if(dG.line==de.line){dF+=u(dl).length-(de.ch-(de.line==dv.line?dv.ch:0))}return{line:dE,ch:dF}};dt=dB(dr.sel.from);dy=dB(dr.sel.to)}}}}bf(dp,dt,dy,null,true);return dh}function bD(dc,df,dh,dg,dd){if(!dg){dg=dh}if(z(dg,dh)){var de=dg;dg=dh;dh=de}return cC(dc,dh,dg,cp(df),null,dd)}function n(dd,dc){return dd.line==dc.line&&dd.ch==dc.ch}function z(dd,dc){return dd.line<dc.line||(dd.line==dc.line&&dd.ch<dc.ch)}function da(dc){return{line:dc.line,ch:dc.ch}}function bV(dc,dd){return Math.max(0,Math.min(dd,dc.size-1))}function ae(dd,df){if(df.line<0){return{line:0,ch:0}}if(df.line>=dd.size){return{line:dd.size-1,ch:cM(dd,dd.size-1).text.length}}var dc=df.ch,de=cM(dd,df.line).text.length;if(dc==null||dc>de){return{line:df.line,ch:de}}else{if(dc<0){return{line:df.line,ch:0}}else{return df}}}function a4(dd,dc){return dc>=0&&dc<dd.size}function cZ(dd,di,dc,de){var dh=dd.view.sel;if(dh.shift||dh.extend){var dg=dh.anchor;if(dc){var df=z(di,dg);if(df!=z(dc,dg)){dg=di;di=dc}else{if(df!=z(di,dc)){di=dc}}}bf(dd,dg,di,de)}else{bf(dd,di,dc||di,de)}dd.curOp.userSelChange=true}function bf(dd,dg,dh,df,de){dd.view.goalColumn=null;var di=dd.view.sel;if(de||!n(dg,di.anchor)){dg=aa(dd,dg,df,de!="push")}if(de||!n(dh,di.head)){dh=aa(dd,dh,df,de!="push")}if(n(di.anchor,dg)&&n(di.head,dh)){return}di.anchor=dg;di.head=dh;var dc=z(dh,dg);di.from=dc?dh:dg;di.to=dc?dg:dh;dd.curOp.updateInput=true;dd.curOp.selectionChanged=true}function r(dc){bf(dc,dc.view.sel.from,dc.view.sel.to,null,"push")}function aa(dn,dl,di,dj){var dm=dn.view.doc,dp=false,df=dl;var dg=di||1;dn.view.cantEdit=false;search:for(;;){var dq=cM(dm,df.line),de;if(dq.markedSpans){for(var dh=0;dh<dq.markedSpans.length;++dh){var dc=dq.markedSpans[dh],dd=dc.marker;if((dc.from==null||(dd.inclusiveLeft?dc.from<=df.ch:dc.from<df.ch))&&(dc.to==null||(dd.inclusiveRight?dc.to>=df.ch:dc.to>df.ch))){if(dj&&dd.clearOnEnter){(de||(de=[])).push(dd);continue}else{if(!dd.atomic){continue}}var dk=dd.find()[dg<0?"from":"to"];if(n(dk,df)){dk.ch+=dg;if(dk.ch<0){if(dk.line){dk=ae(dm,{line:dk.line-1})}else{dk=null}}else{if(dk.ch>dq.text.length){if(dk.line<dm.size-1){dk={line:dk.line+1,ch:0}}else{dk=null}}}if(!dk){if(dp){if(!dj){return aa(dn,dl,di,true)}dn.view.cantEdit=true;return{line:0,ch:0}}dp=true;dk=dl;dg=-dg}}df=dk;continue search}}if(de){for(var dh=0;dh<de.length;++dh){de[dh].clear()}}}return df}}function ci(dd){var de=dd.view;var dh=b9(dd,de.sel.head);if(!de.focused){return}var di=dd.display,df=di.sizer.getBoundingClientRect(),dc=null;if(dh.top+df.top<0){dc=true}else{if(dh.bottom+df.top>(window.innerHeight||document.documentElement.clientHeight)){dc=false}}if(dc!=null&&!a1){var dg=di.cursor.style.display=="none";if(dg){di.cursor.style.display="";di.cursor.style.left=dh.left+"px";di.cursor.style.top=(dh.top-di.viewOffset)+"px"}di.cursor.scrollIntoView(dc);if(dg){di.cursor.style.display="none"}}}function b9(dc,di){for(;;){var dg=false,df=bw(dc,di);var dh=am(dc,df.left,df.top,df.left,df.bottom);var dd=dc.view.scrollTop,de=dc.view.scrollLeft;if(dh.scrollTop!=null){cj(dc,dh.scrollTop);if(Math.abs(dc.view.scrollTop-dd)>1){dg=true}}if(dh.scrollLeft!=null){P(dc,dh.scrollLeft);if(Math.abs(dc.view.scrollLeft-de)>1){dg=true}}if(!dg){return df}}}function B(dc,de,dg,dd,df){var dh=am(dc,de,dg,dd,df);if(dh.scrollTop!=null){cj(dc,dh.scrollTop)}if(dh.scrollLeft!=null){P(dc,dh.scrollLeft)}}function am(dn,df,dm,dd,dl){var dk=dn.display,dt=cz(dk);dm+=dt;dl+=dt;var dq=dk.scroller.clientHeight-cA,dg=dk.scroller.scrollTop,ds={};var de=dn.view.doc.height+2*dt;var dc=dm<dt+10,dj=dl+dt>de-10;if(dm<dg){ds.scrollTop=dc?0:Math.max(0,dm)}else{if(dl>dg+dq){ds.scrollTop=(dj?de:dl)-dq}}var dp=dk.scroller.clientWidth-cA,dr=dk.scroller.scrollLeft;df+=dk.gutters.offsetWidth;dd+=dk.gutters.offsetWidth;var di=dk.gutters.offsetWidth;var dh=df<di+10;if(df<dr+di||dh){if(dh){df=0}ds.scrollLeft=Math.max(0,df-10-di)}else{if(dd>dp+dr-3){ds.scrollLeft=dd+10-dp}}return ds}function bi(dp,df,dn,de){var dm=dp.view.doc;if(!dn){dn="add"}if(dn=="smart"){if(!dp.view.mode.indent){dn="prev"}else{var dd=cB(dp,df)}}var di=dp.options.tabSize;var dq=cM(dm,df),dh=c6(dq.text,null,di);var dc=dq.text.match(/^\s*/)[0],dk;if(dn=="smart"){dk=dp.view.mode.indent(dd,dq.text.slice(dc.length),dq.text);if(dk==aC){if(!de){return}dn="prev"}}if(dn=="prev"){if(df){dk=c6(cM(dm,df-1).text,null,di)}else{dk=0}}else{if(dn=="add"){dk=dh+dp.options.indentUnit}else{if(dn=="subtract"){dk=dh-dp.options.indentUnit}}}dk=Math.max(0,dk);var dl="",dj=0;if(dp.options.indentWithTabs){for(var dg=Math.floor(dk/di);dg;--dg){dj+=di;dl+="\t"}}if(dj<dk){dl+=F(dk-dj)}if(dl!=dc){bD(dp,dl,{line:df,ch:0},{line:df,ch:dc.length},"input")}dq.stateAfter=null}function al(dc,de,dh){var dg=de,dd=de,df=dc.view.doc;if(typeof de=="number"){dd=cM(df,bV(df,de))}else{dg=k(de)}if(dg==null){return null}if(dh(dd,dg)){bv(dc,dg,dg+1)}else{return null}return dd}function cs(dm,dg,dl,df){var dk=dm.view.doc,dh=dm.view.sel.head,dn=dh.line,dc=dh.ch;var dj=cM(dk,dn);function dd(){var dp=dn+dg;if(dp<0||dp==dk.size){return false}dn=dp;return dj=cM(dk,dp)}function di(dq){var dp=(df?bA:aF)(dj,dc,dg,true);if(dp==null){if(!dq&&dd()){if(df){dc=(dg<0?ch:a6)(dj)}else{dc=dg<0?dj.text.length:0}}else{return false}}else{dc=dp}return true}if(dl=="char"){di()}else{if(dl=="column"){di(true)}else{if(dl=="word"){var de=false;for(;;){if(dg<0){if(!di()){break}}if(O(dj.text.charAt(dc))){de=true}else{if(de){if(dg<0){dg=1;di()}break}}if(dg>0){if(!di()){break}}}}}}return aa(dm,{line:dn,ch:dc},dg,true)}function a7(df,dh){var dg=dh.ch,de=dh.ch;if(df){if(dh.after===false||de==df.length){--dg}else{++de}var dd=df.charAt(dg);var dc=O(dd)?O:/\s/.test(dd)?function(di){return/\s/.test(di)}:function(di){return !/\s/.test(di)&&!O(di)};while(dg>0&&dc(df.charAt(dg-1))){--dg}while(de<df.length&&dc(df.charAt(de))){++de}}return{from:{line:dh.line,ch:dg},to:{line:dh.line,ch:de}}}function L(dc,dd){cZ(dc,{line:dd,ch:0},ae(dc.view.doc,{line:dd+1,ch:0}))}af.prototype={getValue:function(de){var dd=[],dc=this.view.doc;dc.iter(0,dc.size,function(df){dd.push(df.text)});return dd.join(de||"\n")},setValue:i(null,function(dc){var df=this.view.doc,de={line:0,ch:0},dd=cM(df,df.size-1).text.length;ap(this,de,{line:df.size-1,ch:dd},cp(dc),de,de,"setValue")}),getSelection:function(dc){return this.getRange(this.view.sel.from,this.view.sel.to,dc)},replaceSelection:i(null,function(dd,df,dc){var de=this.view.sel;cC(this,de.from,de.to,cp(dd),df||"around",dc)}),focus:function(){window.focus();bj(this);c5(this);Y(this)},setOption:function(de,df){var dd=this.options,dc=dd[de];if(dd[de]==df&&de!="mode"){return}dd[de]=df;if(c1.hasOwnProperty(de)){i(this,c1[de])(this,df,dc)}},getOption:function(dc){return this.options[dc]},getMode:function(){return this.view.mode},addKeyMap:function(dc){this.view.keyMaps.push(dc)},removeKeyMap:function(dd){var de=this.view.keyMaps;for(var dc=0;dc<de.length;++dc){if((typeof dd=="string"?de[dc].name:de[dc])==dd){de.splice(dc,1);return true}}},undo:i(null,function(){cc(this,"undo")}),redo:i(null,function(){cc(this,"redo")}),indentLine:i(null,function(de,dc,dd){if(typeof dc!="string"){if(dc==null){dc=this.options.smartIndent?"smart":"prev"}else{dc=dc?"add":"subtract"}}if(a4(this.view.doc,de)){bi(this,de,dc,dd)}}),indentSelection:i(null,function(dd){var de=this.view.sel;if(n(de.from,de.to)){return bi(this,de.from.line,dd)}var df=de.to.line-(de.to.ch?0:1);for(var dc=de.from.line;dc<=df;++dc){bi(this,dc,dd)}}),historySize:function(){var dc=this.view.history;return{undo:dc.done.length,redo:dc.undone.length}},clearHistory:function(){this.view.history=aD()},markClean:function(){this.view.history.dirtyCounter=0;this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return this.view.history.dirtyCounter==0},getHistory:function(){var dd=this.view.history;function dc(dj){for(var di=0,dk=[],dl;di<dj.length;++di){var dm=dj[di];dk.push({events:dl=[],fromBefore:dm.fromBefore,toBefore:dm.toBefore,fromAfter:dm.fromAfter,toAfter:dm.toAfter});for(var dh=0,dg=dm.events;dh<dg.length;++dh){var de=[],dn=dg[dh];dl.push({start:dn.start,added:dn.added,old:de});for(var df=0;df<dn.old.length;++df){de.push(u(dn.old[df]))}}}return dk}return{done:dc(dd.done),undone:dc(dd.undone)}},setHistory:function(dd){var dc=this.view.history=aD();dc.done=dd.done;dc.undone=dd.undone},getTokenAt:function(di){var df=this.view.doc;di=ae(df,di);var de=cB(this,di.line),dh=this.view.mode;var dc=cM(df,di.line);var dg=new c(dc.text,this.options.tabSize);while(dg.pos<di.ch&&!dg.eol()){dg.start=dg.pos;var dd=dh.token(dg,de)}return{start:dg.start,end:dg.pos,string:dg.current(),className:dd||null,type:dd||null,state:de}},getStateAfter:function(dc){var dd=this.view.doc;dc=bV(dd,dc==null?dd.size-1:dc);return cB(this,dc+1)},cursorCoords:function(df,dd){var de,dc=this.view.sel;if(df==null){de=dc.head}else{if(typeof df=="object"){de=ae(this.view.doc,df)}else{de=df?dc.from:dc.to}}return bw(this,de,dd||"page")},charCoords:function(dd,dc){return cQ(this,ae(this.view.doc,dd),dc||"page")},coordsChar:function(dc){var dd=this.display.lineSpace.getBoundingClientRect();return bq(this,dc.left-dd.left,dc.top-dd.top)},defaultTextHeight:function(){return bB(this.display)},markText:i(null,function(de,dd,dc){return bo(this,ae(this.view.doc,de),ae(this.view.doc,dd),dc,"range")}),setBookmark:i(null,function(dd,dc){dd=ae(this.view.doc,dd);return bo(this,dd,dd,dc?{replacedWith:dc}:{},"bookmark")}),findMarksAt:function(dh){var df=this.view.doc;dh=ae(df,dh);var dg=[],dd=cM(df,dh.line).markedSpans;if(dd){for(var dc=0;dc<dd.length;++dc){var de=dd[dc];if((de.from==null||de.from<=dh.ch)&&(de.to==null||de.to>=dh.ch)){dg.push(de.marker)}}}return dg},setGutterMarker:i(null,function(dc,dd,de){return al(this,dc,function(df){var dg=df.gutterMarkers||(df.gutterMarkers={});dg[dd]=de;if(!de&&cb(dg)){df.gutterMarkers=null}return true})}),clearGutter:i(null,function(de){var dd=0,dc=this,df=dc.view.doc;df.iter(0,df.size,function(dg){if(dg.gutterMarkers&&dg.gutterMarkers[de]){dg.gutterMarkers[de]=null;bv(dc,dd,dd+1);if(cb(dg.gutterMarkers)){dg.gutterMarkers=null}}++dd})}),addLineClass:i(null,function(de,dd,dc){return al(this,de,function(df){var dg=dd=="text"?"textClass":dd=="background"?"bgClass":"wrapClass";if(!df[dg]){df[dg]=dc}else{if(new RegExp("\\b"+dc+"\\b").test(df[dg])){return false}else{df[dg]+=" "+dc}}return true})}),removeLineClass:i(null,function(de,dd,dc){return al(this,de,function(df){var di=dd=="text"?"textClass":dd=="background"?"bgClass":"wrapClass";var dh=df[di];if(!dh){return false}else{if(dc==null){df[di]=null}else{var dg=dh.replace(new RegExp("^"+dc+"\\b\\s*|\\s*\\b"+dc+"\\b"),"");if(dg==dh){return false}df[di]=dg||null}}return true})}),addLineWidget:i(null,function(df,dd,dc){var de=dc||{};de.node=dd;if(de.noHScroll){this.display.alignWidgets=true}al(this,df,function(dg){(dg.widgets||(dg.widgets=[])).push(de);de.line=dg;return true});return de}),removeLineWidget:i(null,function(de){var dc=de.line.widgets,df=k(de.line);if(df==null){return}for(var dd=0;dd<dc.length;++dd){if(dc[dd]==de){dc.splice(dd--,1)}}bv(this,df,df+1)}),lineInfo:function(dc){if(typeof dc=="number"){if(!a4(this.view.doc,dc)){return null}var dd=dc;dc=cM(this.view.doc,dc);if(!dc){return null}}else{var dd=k(dc);if(dd==null){return null}}return{line:dd,handle:dc,text:dc.text,gutterMarkers:dc.gutterMarkers,textClass:dc.textClass,bgClass:dc.bgClass,wrapClass:dc.wrapClass,widgets:dc.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(dh,de,dj,df,dl){var dg=this.display;dh=bw(this,ae(this.view.doc,dh));var di=dh.top,dd=dh.left;de.style.position="absolute";dg.sizer.appendChild(de);if(df=="over"){di=dh.top}else{if(df=="near"){var dc=Math.max(dg.wrapper.clientHeight,this.view.doc.height),dk=Math.max(dg.sizer.clientWidth,dg.lineSpace.clientWidth);if(dh.bottom+de.offsetHeight>dc&&dh.top>de.offsetHeight){di=dh.top-de.offsetHeight}if(dd+de.offsetWidth>dk){dd=dk-de.offsetWidth}}}de.style.top=(di+cz(dg))+"px";de.style.left=de.style.right="";if(dl=="right"){dd=dg.sizer.clientWidth-de.offsetWidth;de.style.right="0px"}else{if(dl=="left"){dd=0}else{if(dl=="middle"){dd=(dg.sizer.clientWidth-de.offsetWidth)/2}}de.style.left=dd+"px"}if(dj){B(this,dd,di,dd+de.offsetWidth,di+de.offsetHeight)}},lineCount:function(){return this.view.doc.size},clipPos:function(dc){return ae(this.view.doc,dc)},getCursor:function(de){var dc=this.view.sel,dd;if(de==null||de=="head"){dd=dc.head}else{if(de=="anchor"){dd=dc.anchor}else{if(de=="end"||de===false){dd=dc.to}else{dd=dc.from}}}return da(dd)},somethingSelected:function(){return !n(this.view.sel.from,this.view.sel.to)},setCursor:i(null,function(dc,dd,df){var de=ae(this.view.doc,typeof dc=="number"?{line:dc,ch:dd||0}:dc);if(df){cZ(this,de)}else{bf(this,de,de)}}),setSelection:i(null,function(dc,dd){var de=this.view.doc;bf(this,ae(de,dc),ae(de,dd||dc))}),extendSelection:i(null,function(de,dd){var dc=this.view.doc;cZ(this,ae(dc,de),dd&&ae(dc,dd))}),setExtending:function(dc){this.view.sel.extend=dc},getLine:function(dd){var dc=this.getLineHandle(dd);return dc&&dc.text},getLineHandle:function(dc){var dd=this.view.doc;if(a4(dd,dc)){return cM(dd,dc)}},getLineNumber:function(dc){return k(dc)},setLine:i(null,function(dc,dd){if(a4(this.view.doc,dc)){bD(this,dd,{line:dc,ch:0},{line:dc,ch:cM(this.view.doc,dc).text.length})}}),removeLine:i(null,function(dc){if(a4(this.view.doc,dc)){bD(this,"",{line:dc,ch:0},ae(this.view.doc,{line:dc+1,ch:0}))}}),replaceRange:i(null,function(dc,df,de){var dd=this.view.doc;df=ae(dd,df);de=de?ae(dd,de):df;return bD(this,dc,df,de)}),getRange:function(di,dh,dg){var df=this.view.doc;di=ae(df,di);dh=ae(df,dh);var dd=di.line,dc=dh.line;if(dd==dc){return cM(df,dd).text.slice(di.ch,dh.ch)}var de=[cM(df,dd).text.slice(di.ch)];df.iter(dd+1,dc,function(dj){de.push(dj.text)});de.push(cM(df,dc).text.slice(0,dh.ch));return de.join(dg||"\n")},triggerOnKeyDown:i(null,ce),execCommand:function(dc){return ak[dc](this)},moveH:i(null,function(dc,dd){var de=this.view.sel,df=dc<0?de.from:de.to;if(de.shift||de.extend||n(de.from,de.to)){df=cs(this,dc,dd,true)}cZ(this,df,df,dc)}),deleteH:i(null,function(dc,dd){var de=this.view.sel;if(!n(de.from,de.to)){bD(this,"",de.from,de.to,"delete")}else{bD(this,"",de.from,cs(this,dc,dd,false),"delete")}this.curOp.userSelChange=true}),moveV:i(null,function(dc,dl){var di=this.view,dk=di.doc,de=this.display;var dm=di.sel.head,dh=bw(this,dm,"div");var dj=dh.left,dg;if(di.goalColumn!=null){dj=di.goalColumn}if(dl=="page"){var df=Math.min(de.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);dg=dh.top+dc*df}else{if(dl=="line"){dg=dc>0?dh.bottom+3:dh.top-3}}do{var dd=bq(this,dj,dg);dg+=dc*5}while(dd.outside&&(dc<0?dg>0:dg<dk.height));if(dl=="page"){de.scrollbarV.scrollTop+=cQ(this,dd,"div").top-dh.top}cZ(this,dd,dd,dc);di.goalColumn=dj}),toggleOverwrite:function(){if(this.view.overwrite=!this.view.overwrite){this.display.cursor.className+=" CodeMirror-overwrite"}else{this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")}},posFromIndex:function(de){var df=0,dc,dd=this.view.doc;dd.iter(0,dd.size,function(dg){var dh=dg.text.length+1;if(dh>de){dc=de;return true}de-=dh;++df});return ae(dd,{line:df,ch:dc})},indexFromPos:function(dd){if(dd.line<0||dd.ch<0){return 0}var dc=dd.ch;this.view.doc.iter(0,dd.line,function(de){dc+=de.text.length+1});return dc},scrollTo:function(dc,dd){if(dc!=null){this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=dc}if(dd!=null){this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=dd}cg(this,[])},getScrollInfo:function(){var dc=this.display.scroller,dd=cA;return{left:dc.scrollLeft,top:dc.scrollTop,height:dc.scrollHeight-dd,width:dc.scrollWidth-dd,clientHeight:dc.clientHeight-dd,clientWidth:dc.clientWidth-dd}},scrollIntoView:function(dc){if(typeof dc=="number"){dc={line:dc,ch:0}}dc=dc?ae(this.view.doc,dc):this.view.sel.head;b9(this,dc)},setSize:function(de,dc){function dd(df){return typeof df=="number"||/^\d+$/.test(String(df))?df+"px":df}if(de!=null){this.display.wrapper.style.width=dd(de)}if(dc!=null){this.display.wrapper.style.height=dd(dc)}this.refresh()},on:function(dc,dd){b8(this,dc,dd)},off:function(dc,dd){c3(this,dc,dd)},operation:function(dc){return i(this,dc)()},refresh:function(){cr(this);if(this.display.scroller.scrollHeight>this.view.scrollTop){this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=this.view.scrollTop}cg(this,true)},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var c1=af.optionHandlers={};var aR=af.defaults={};function aV(dc,df,de,dd){af.defaults[dc]=df;if(de){c1[dc]=dd?function(dg,di,dh){if(dh!=g){de(dg,di,dh)}}:de}}var g=af.Init={toString:function(){return"CodeMirror.Init"}};aV("value","",function(dc,dd){dc.setValue(dd)},true);aV("mode",null,bK,true);aV("indentUnit",2,bK,true);aV("indentWithTabs",false);aV("smartIndent",true);aV("tabSize",4,function(dc){bK(dc);cr(dc);cg(dc,true)},true);aV("electricChars",true);aV("theme","default",function(dc){cH(dc);bF(dc)},true);aV("keyMap","default",cD);aV("extraKeys",null);aV("onKeyEvent",null);aV("onDragEvent",null);aV("lineWrapping",false,cN,true);aV("gutters",[],function(dc){aM(dc.options);bF(dc)},true);aV("lineNumbers",false,function(dc){aM(dc.options);bF(dc)},true);aV("firstLineNumber",1,bF,true);aV("lineNumberFormatter",function(dc){return dc},bF,true);aV("showCursorWhenSelecting",false,c7,true);aV("readOnly",false,function(dc,dd){if(dd=="nocursor"){H(dc);dc.display.input.blur()}else{if(!dd){cG(dc,true)}}});aV("dragDrop",true);aV("cursorBlinkRate",530);aV("cursorHeight",1);aV("workTime",100);aV("workDelay",100);aV("flattenSpans",true);aV("pollInterval",100);aV("undoDepth",40);aV("viewportMargin",10,function(dc){dc.refresh()},true);aV("tabindex",null,function(dc,dd){dc.display.input.tabIndex=dd||""});aV("autofocus",null);var cW=af.modes={},bT=af.mimeModes={};af.defineMode=function(dc,de){if(!af.defaults.mode&&dc!="null"){af.defaults.mode=dc}if(arguments.length>2){de.dependencies=[];for(var dd=2;dd<arguments.length;++dd){de.dependencies.push(arguments[dd])}}cW[dc]=de};af.defineMIME=function(dd,dc){bT[dd]=dc};af.resolveMode=function(dc){if(typeof dc=="string"&&bT.hasOwnProperty(dc)){dc=bT[dc]}else{if(typeof dc=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(dc)){return af.resolveMode("application/xml")}}if(typeof dc=="string"){return{name:dc}}else{return dc||{name:"null"}}};af.getMode=function(dd,dc){var dc=af.resolveMode(dc);var df=cW[dc.name];if(!df){return af.getMode(dd,"text/plain")}var dg=df(dd,dc);if(b1.hasOwnProperty(dc.name)){var de=b1[dc.name];for(var dh in de){if(!de.hasOwnProperty(dh)){continue}if(dg.hasOwnProperty(dh)){dg["_"+dh]=dg[dh]}dg[dh]=de[dh]}}dg.name=dc.name;return dg};af.defineMode("null",function(){return{token:function(dc){dc.skipToEnd()}}});af.defineMIME("text/plain","null");var b1=af.modeExtensions={};af.extendMode=function(de,dd){var dc=b1.hasOwnProperty(de)?b1[de]:(b1[de]={});for(var df in dd){if(dd.hasOwnProperty(df)){dc[df]=dd[df]}}};af.defineExtension=function(dc,dd){af.prototype[dc]=dd};af.defineOption=aV;var D=[];af.defineInitHook=function(dc){D.push(dc)};function f(df,dc){if(dc===true){return dc}if(df.copyState){return df.copyState(dc)}var de={};for(var dg in dc){var dd=dc[dg];if(dd instanceof Array){dd=dd.concat([])}de[dg]=dd}return de}af.copyState=f;function aK(de,dd,dc){return de.startState?de.startState(dd,dc):true}af.startState=aK;af.innerMode=function(de,dc){while(de.innerMode){var dd=de.innerMode(dc);dc=dd.state;de=dd.mode}return dd||{mode:de,state:dc}};var ak=af.commands={selectAll:function(dc){dc.setSelection({line:0,ch:0},{line:dc.lineCount()-1})},killLine:function(dc){var df=dc.getCursor(true),de=dc.getCursor(false),dd=!n(df,de);if(!dd&&dc.getLine(df.line).length==df.ch){dc.replaceRange("",df,{line:df.line+1,ch:0},"delete")}else{dc.replaceRange("",df,dd?de:{line:df.line},"delete")}},deleteLine:function(dc){var dd=dc.getCursor().line;dc.replaceRange("",{line:dd,ch:0},{line:dd},"delete")},undo:function(dc){dc.undo()},redo:function(dc){dc.redo()},goDocStart:function(dc){dc.extendSelection({line:0,ch:0})},goDocEnd:function(dc){dc.extendSelection({line:dc.lineCount()-1})},goLineStart:function(dc){dc.extendSelection(v(dc,dc.getCursor().line))},goLineStartSmart:function(dd){var dh=dd.getCursor(),di=v(dd,dh.line);var de=dd.getLineHandle(di.line);var dc=bZ(de);if(!dc||dc[0].level==0){var dg=Math.max(0,de.text.search(/\S/));var df=dh.line==di.line&&dh.ch<=dg&&dh.ch;dd.extendSelection({line:di.line,ch:df?0:dg})}else{dd.extendSelection(di)}},goLineEnd:function(dc){dc.extendSelection(M(dc,dc.getCursor().line))},goLineUp:function(dc){dc.moveV(-1,"line")},goLineDown:function(dc){dc.moveV(1,"line")},goPageUp:function(dc){dc.moveV(-1,"page")},goPageDown:function(dc){dc.moveV(1,"page")},goCharLeft:function(dc){dc.moveH(-1,"char")},goCharRight:function(dc){dc.moveH(1,"char")},goColumnLeft:function(dc){dc.moveH(-1,"column")},goColumnRight:function(dc){dc.moveH(1,"column")},goWordLeft:function(dc){dc.moveH(-1,"word")},goWordRight:function(dc){dc.moveH(1,"word")},delCharBefore:function(dc){dc.deleteH(-1,"char")},delCharAfter:function(dc){dc.deleteH(1,"char")},delWordBefore:function(dc){dc.deleteH(-1,"word")},delWordAfter:function(dc){dc.deleteH(1,"word")},indentAuto:function(dc){dc.indentSelection("smart")},indentMore:function(dc){dc.indentSelection("add")},indentLess:function(dc){dc.indentSelection("subtract")},insertTab:function(dc){dc.replaceSelection("\t","end","input")},defaultTab:function(dc){if(dc.somethingSelected()){dc.indentSelection("add")}else{dc.replaceSelection("\t","end","input")}},transposeChars:function(dc){var de=dc.getCursor(),dd=dc.getLine(de.line);if(de.ch>0&&de.ch<dd.length-1){dc.replaceRange(dd.charAt(de.ch)+dd.charAt(de.ch-1),{line:de.line,ch:de.ch-1},{line:de.line,ch:de.ch+1})}},newlineAndIndent:function(dc){i(dc,function(){dc.replaceSelection("\n","end","input");dc.indentLine(dc.getCursor().line,null,true)})()},toggleOverwrite:function(dc){dc.toggleOverwrite()}};var c4=af.keyMap={};c4.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};c4.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};c4.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};c4["default"]=aN?c4.macDefault:c4.pcDefault;c4.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function l(dc){if(typeof dc=="string"){return c4[dc]}else{return dc}}function ah(dc,dh,df,de){function dg(dm){dm=l(dm);var dk=dm[dc];if(dk===false){if(de){de()}return true}if(dk!=null&&df(dk)){return true}if(dm.nofallthrough){if(de){de()}return true}var dj=dm.fallthrough;if(dj==null){return false}if(Object.prototype.toString.call(dj)!="[object Array]"){return dg(dj)}for(var di=0,dl=dj.length;di<dl;++di){if(dg(dj[di])){return true}}return false}for(var dd=0;dd<dh.length;++dd){if(dg(dh[dd])){return true}}}function m(dd){var dc=A[S(dd,"keyCode")];return dc=="Ctrl"||dc=="Alt"||dc=="Shift"||dc=="Mod"}af.isModifierKey=m;af.fromTextArea=function(dj,dk){if(!dk){dk={}}dk.value=dj.value;if(!dk.tabindex&&dj.tabindex){dk.tabindex=dj.tabindex}if(dk.autofocus==null){var dc=document.body;try{dc=document.activeElement}catch(de){}dk.autofocus=dc==dj||dj.getAttribute("autofocus")!=null&&dc==document.body}function dg(){dj.value=di.getValue()}if(dj.form){b8(dj.form,"submit",dg);var dd=dj.form,dh=dd.submit;try{dd.submit=function df(){dg();dd.submit=dh;dd.submit();dd.submit=df}}catch(de){}}dj.style.display="none";var di=af(function(dl){dj.parentNode.insertBefore(dl,dj.nextSibling)},dk);di.save=dg;di.getTextArea=function(){return dj};di.toTextArea=function(){dg();dj.parentNode.removeChild(di.getWrapperElement());dj.style.display="";if(dj.form){c3(dj.form,"submit",dg);if(typeof dj.form.submit=="function"){dj.form.submit=dh}}};return di};function c(dc,dd){this.pos=this.start=0;this.string=dc;this.tabSize=dd||8}c.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(dc){var de=this.string.charAt(this.pos);if(typeof dc=="string"){var dd=de==dc}else{var dd=de&&(dc.test?dc.test(de):dc(de))}if(dd){++this.pos;return de}},eatWhile:function(dc){var dd=this.pos;while(this.eat(dc)){}return this.pos>dd},eatSpace:function(){var dc=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>dc},skipToEnd:function(){this.pos=this.string.length},skipTo:function(dc){var dd=this.string.indexOf(dc,this.pos);if(dd>-1){this.pos=dd;return true}},backUp:function(dc){this.pos-=dc},column:function(){return c6(this.string,this.start,this.tabSize)},indentation:function(){return c6(this.string,null,this.tabSize)},match:function(df,dd,dc){if(typeof df=="string"){var dg=function(dh){return dc?dh.toLowerCase():dh};if(dg(this.string).indexOf(dg(df),this.pos)==this.pos){if(dd!==false){this.pos+=df.length}return true}}else{var de=this.string.slice(this.pos).match(df);if(de&&de.index>0){return null}if(de&&dd!==false){this.pos+=de[0].length}return de}},current:function(){return this.string.slice(this.start,this.pos)}};af.StringStream=c;function db(dc,dd){this.lines=[];this.type=dd;this.cm=dc}db.prototype.clear=function(){if(this.explicitlyCleared){return}R(this.cm);var df=null,dc=null;for(var de=0;de<this.lines.length;++de){var dd=this.lines[de];var dg=cx(dd.markedSpans,this);if(dg.to!=null){dc=k(dd)}dd.markedSpans=cK(dd.markedSpans,dg);if(dg.from!=null){df=k(dd)}else{if(this.collapsed&&!aU(dd)){aA(dd,bB(this.cm.display))}}}if(df!=null){bv(this.cm,df,dc+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.collapsed&&this.cm.view.cantEdit){this.cm.view.cantEdit=false;r(this.cm)}x(this.cm);bP(this.cm,this,"clear")};db.prototype.find=function(){var dh,dg;for(var dd=0;dd<this.lines.length;++dd){var dc=this.lines[dd];var de=cx(dc.markedSpans,this);if(de.from!=null||de.to!=null){var df=k(dc);if(de.from!=null){dh={line:df,ch:de.from}}if(de.to!=null){dg={line:df,ch:de.to}}}}if(this.type=="bookmark"){return dh}return dh&&{from:dh,to:dg}};function bo(dl,di,dj,dn,dh){var dk=dl.view.doc;var dg=new db(dl,dh);if(dh=="range"&&!z(di,dj)){return dg}if(dn){for(var dd in dn){if(dn.hasOwnProperty(dd)){dg[dd]=dn[dd]}}}if(dg.replacedWith){dg.collapsed=true;dg.replacedWith=bm("span",[dg.replacedWith],"CodeMirror-widget")}if(dg.collapsed){cS=true}var dc=di.line,dm=0,df,de;dk.iter(dc,dj.line+1,function(dp){var dq={from:null,to:null,marker:dg};dm+=dp.text.length;if(dc==di.line){dq.from=di.ch;dm-=di.ch}if(dc==dj.line){dq.to=dj.ch;dm-=dp.text.length-dj.ch}if(dg.collapsed){if(dc==dj.line){de=ag(dp,dj.ch)}if(dc==di.line){df=ag(dp,di.ch)}else{aA(dp,0)}}b5(dp,dq);if(dg.collapsed&&dc==di.line&&aU(dp)){aA(dp,0)}++dc});if(dg.readOnly){ax=true;if(dl.view.history.done.length||dl.view.history.undone.length){dl.clearHistory()}}if(dg.collapsed){if(df!=de){throw new Error("Inserting collapsed marker overlapping an existing one")}dg.size=dm;dg.atomic=true}if(dg.className||dg.startStyle||dg.endStyle||dg.collapsed){bv(dl,di.line,dj.line+1)}if(dg.atomic){r(dl)}return dg}function cx(de,dc){if(de){for(var dd=0;dd<de.length;++dd){var df=de[dd];if(df.marker==dc){return df}}}}function cK(dd,de){for(var df,dc=0;dc<dd.length;++dc){if(dd[dc]!=de){(df||(df=[])).push(dd[dc])}}return df}function b5(dc,dd){dc.markedSpans=dc.markedSpans?dc.markedSpans.concat([dd]):[dd];dd.marker.lines.push(dc)}function o(de,di){if(de){for(var dg=0,dd;dg<de.length;++dg){var dh=de[dg],dc=dh.marker;var df=dh.from==null||(dc.inclusiveLeft?dh.from<=di:dh.from<di);if(df||dc.type=="bookmark"&&dh.from==di){var dj=dh.to==null||(dc.inclusiveRight?dh.to>=di:dh.to>di);(dd||(dd=[])).push({from:dh.from,to:dj?null:dh.to,marker:dc})}}}return dd}function cX(dd,de,dg){if(dd){for(var dh=0,dj;dh<dd.length;++dh){var dk=dd[dh],di=dk.marker;var df=dk.to==null||(di.inclusiveRight?dk.to>=dg:dk.to>dg);if(df||di.type=="bookmark"&&dk.from==dg&&dk.from!=de){var dc=dk.from==null||(di.inclusiveLeft?dk.from<=dg:dk.from<dg);(dj||(dj=[])).push({from:dc?null:dk.from-dg,to:dk.to==null?null:dk.to-dg,marker:di})}}}return dj}function cY(dk,dq,dd,dg,dj){if(!dk&&!dq){return dj}var di=o(dk,dd);var dn=cX(dq,dd,dg);var dp=dj.length==1,de=aQ(dj).length+(dp?dd:0);if(di){for(var df=0;df<di.length;++df){var dm=di[df];if(dm.to==null){var dr=cx(dn,dm.marker);if(!dr){dm.to=dd}else{if(dp){dm.to=dr.to==null?null:dr.to+de}}}}}if(dn){for(var df=0;df<dn.length;++df){var dm=dn[df];if(dm.to!=null){dm.to+=de}if(dm.from==null){var dr=cx(di,dm.marker);if(!dr){dm.from=de;if(dp){(di||(di=[])).push(dm)}}}else{dm.from+=de;if(dp){(di||(di=[])).push(dm)}}}}var dh=[ai(dj[0],di)];if(!dp){var dl=dj.length-2,dc;if(dl>0&&di){for(var df=0;df<di.length;++df){if(di[df].to==null){(dc||(dc=[])).push({from:null,to:null,marker:di[df].marker})}}}for(var df=0;df<dl;++df){dh.push(ai(dj[df+1],dc))}dh.push(ai(aQ(dj),dn))}return dh}function ca(dl,dj,dk){var de=null;dl.iter(dj.line,dk.line+1,function(dm){if(dm.markedSpans){for(var dn=0;dn<dm.markedSpans.length;++dn){var dp=dm.markedSpans[dn].marker;if(dp.readOnly&&(!de||c0(de,dp)==-1)){(de||(de=[])).push(dp)}}}});if(!de){return null}var df=[{from:dj,to:dk}];for(var dh=0;dh<de.length;++dh){var dd=de[dh].find();for(var dg=0;dg<df.length;++dg){var dc=df[dg];if(!z(dd.from,dc.to)||z(dd.to,dc.from)){continue}var di=[dg,1];if(z(dc.from,dd.from)){di.push({from:dc.from,to:dd.from})}if(z(dd.to,dc.to)){di.push({from:dd.to,to:dc.to})}df.splice.apply(df,di);dg+=di.length-1}}return df}function ag(dd,df){var dc=cS&&dd.markedSpans,dh;if(dc){for(var dg,de=0;de<dc.length;++de){dg=dc[de];if(!dg.marker.collapsed){continue}if((dg.from==null||dg.from<df)&&(dg.to==null||dg.to>df)&&(!dh||dh.width<dg.marker.width)){dh=dg.marker}}}return dh}function cR(dc){return ag(dc,-1)}function C(dc){return ag(dc,dc.text.length+1)}function at(de,dd){var dc;while(dc=cR(dd)){dd=cM(de,dc.find().from.line)}return dd}function aU(dd){var dc=cS&&dd.markedSpans;if(dc){for(var df,de=0;de<dc.length;++de){df=dc[de];if(!df.marker.collapsed){continue}if(df.from==null){return true}if(df.from==0&&df.marker.inclusiveLeft&&b(dd,df)){return true}}}}window.lineIsHidden=aU;function b(dc,de){if(de.to==null||de.marker.inclusiveRight&&de.to==dc.text.length){return true}for(var df,dd=0;dd<dc.markedSpans.length;++dd){df=dc.markedSpans[dd];if(df.marker.collapsed&&df.from==de.to&&(df.marker.inclusiveLeft||de.marker.inclusiveRight)&&b(dc,df)){return true}}}function u(dc){return typeof dc=="string"?dc:dc.text}function cf(df){if(typeof df=="string"){return null}var de=df.markedSpans,dc=null;for(var dd=0;dd<de.length;++dd){if(de[dd].marker.explicitlyCleared){if(!dc){dc=de.slice(0,dd)}}else{if(dc){dc.push(de[dd])}}}return !dc?de:dc.length?dc:null}function ai(dd,dc){return dc?{text:dd,markedSpans:dc}:dd}function K(de){var dg=de.markedSpans;if(!dg){return}for(var df=0;df<dg.length;++df){var dd=dg[df].marker.lines;var dc=c0(dd,de);dd.splice(dc,1)}de.markedSpans=null}function cE(dc,de){if(!de){return}for(var dd=0;dd<de.length;++dd){de[dd].marker.lines.push(dc)}dc.markedSpans=de}function a9(df,de,dc){var dd={text:df,height:dc};cE(dd,de);if(aU(dd)){dd.height=0}return dd}function an(dc,dd,df,de){dd.text=df;dd.stateAfter=dd.styles=null;if(dd.order!=null){dd.order=null}K(dd);cE(dd,de);if(aU(dd)){dd.height=0}else{if(!dd.height){dd.height=bB(dc.display)}}bP(dc,dd,"change")}function N(dc){dc.parent=null;K(dc)}function a(dk,dp,dd){var dh=dk.view.mode,de=dk.options.flattenSpans;var dg=!dp.styles,dj=0,dn="",di=null;var dl=new c(dp.text,dk.options.tabSize),dm=dp.styles||(dp.styles=[]);if(dp.text==""&&dh.blankLine){dh.blankLine(dd)}while(!dl.eol()){var dc=dh.token(dl,dd),df=dl.current();dl.start=dl.pos;if(!de||di!=dc){if(dn){dg=dg||dj>=dm.length||dn!=dm[dj]||di!=dm[dj+1];dm[dj++]=dn;dm[dj++]=di}dn=df;di=dc}else{dn=dn+df}if(dl.pos>5000){break}}if(dn){dg=dg||dj>=dm.length||dn!=dm[dj]||di!=dm[dj+1];dm[dj++]=dn;dm[dj++]=di}if(dl.pos>5000){dm[dj++]=dp.text.slice(dl.pos);dm[dj++]=null}if(dj!=dm.length){dm.length=dj;dg=true}return dg}function bS(dc,dd,de){var dg=dc.view.mode;var df=new c(dd.text,dc.options.tabSize);if(dd.text==""&&dg.blankLine){dg.blankLine(de)}while(!df.eol()&&df.pos<=5000){dg.token(df,de);df.start=df.pos}}var bJ={};function aL(dc){if(!dc){return null}return bJ[dc]||(bJ[dc]="cm-"+dc.replace(/ +/g," cm-"))}function by(dh,dk,dd){var di,dl=dk,dg,dj,dc=true;while(di=cR(dl)){dc=false;dl=cM(dh.view.doc,di.find().from.line);if(!dg){dg=dl}}var df={pre:bm("pre"),col:0,pos:0,display:!dd,measure:null,addedOne:false,cm:dh};if(dl.textClass){df.pre.className=dl.textClass}do{if(!dl.styles){a(dh,dl,dl.stateAfter=cB(dh,k(dl)))}df.measure=dl==dk&&dd;df.pos=0;df.addToken=df.measure?ab:Z;if(dd&&dj&&dl!=dk&&!df.addedOne){dd[0]=df.pre.appendChild(a0(dh.display.measure));df.addedOne=true}var de=be(dl,df);dj=dl==dg;if(de){dl=cM(dh.view.doc,de.to.line);dc=false}}while(de);if(dd&&!df.addedOne){dd[0]=df.pre.appendChild(dc?bm("span","\u00a0"):a0(dh.display.measure))}if(!df.pre.firstChild&&!aU(dk)){df.pre.appendChild(document.createTextNode("\u00a0"))}return df.pre}var bx=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;function Z(dg,dn,dc,df,dp){if(!dn){return}if(!bx.test(dn)){dg.col+=dn.length;var dj=document.createTextNode(dn)}else{var dj=document.createDocumentFragment(),dl=0;while(true){bx.lastIndex=dl;var dd=bx.exec(dn);var di=dd?dd.index-dl:dn.length-dl;if(di){dj.appendChild(document.createTextNode(dn.slice(dl,dl+di)));dg.col+=di}if(!dd){break}dl+=di+1;if(dd[0]=="\t"){var dh=dg.cm.options.tabSize,dk=dh-dg.col%dh;dj.appendChild(bm("span",F(dk),"cm-tab"));dg.col+=dk}else{var de=bm("span","\u2022","cm-invalidchar");de.title="\\u"+dd[0].charCodeAt(0).toString(16);dj.appendChild(de);dg.col+=1}}}if(dc||df||dp||dg.measure){var dm=dc||"";if(df){dm+=df}if(dp){dm+=dp}return dg.pre.appendChild(bm("span",[dj],dm))}dg.pre.appendChild(dj)}function ab(dd,dh,df,dc,dg){for(var de=0;de<dh.length;++de){if(de&&de<dh.length-1&&dd.cm.options.lineWrapping&&cP.test(dh.slice(de-1,de+1))){dd.pre.appendChild(bm("wbr"))}dd.measure[dd.pos++]=Z(dd,dh.charAt(de),df,de==0&&dc,de==dh.length-1&&dg)}if(dh.length){dd.addedOne=true}}function bH(dc,dd,de){if(de){if(!dc.display){de=de.cloneNode(true)}dc.pre.appendChild(de);if(dc.measure&&dd){dc.measure[dc.pos]=de;dc.addedOne=true}}dc.pos+=dd}function be(dj,dr){var dq=dj.styles,dh=dj.markedSpans;if(!dh){for(var du=0;du<dq.length;du+=2){dr.addToken(dr,dq[du],aL(dq[du+1]))}return}var di=dj.text,dv=di.length;var dg=0,du=0,dm="",dw;var dy=0,dc,dx,dn,de;for(;;){if(dy==dg){dc=dx=dn="";de=null;dy=Infinity;var dk=null;for(var ds=0;ds<dh.length;++ds){var dt=dh[ds],dp=dt.marker;if(dt.from<=dg&&(dt.to==null||dt.to>dg)){if(dt.to!=null&&dy>dt.to){dy=dt.to;dx=""}if(dp.className){dc+=" "+dp.className}if(dp.startStyle&&dt.from==dg){dn+=" "+dp.startStyle}if(dp.endStyle&&dt.to==dy){dx+=" "+dp.endStyle}if(dp.collapsed&&(!de||de.marker.width<dp.width)){de=dt}}else{if(dt.from>dg&&dy>dt.from){dy=dt.from}}if(dp.type=="bookmark"&&dt.from==dg&&dp.replacedWith){dk=dp.replacedWith}}if(de&&(de.from||0)==dg){bH(dr,(de.to==null?dv:de.to)-dg,de.from!=null&&de.marker.replacedWith);if(de.to==null){return de.marker.find()}}if(dk&&!de){bH(dr,0,dk)}}if(dg>=dv){break}var dl=Math.min(dv,dy);while(true){if(dm){var dd=dg+dm.length;if(!de){var df=dd>dl?dm.slice(0,dl-dg):dm;dr.addToken(dr,df,dw+dc,dn,dg+df.length==dy?dx:"")}if(dd>=dl){dm=dm.slice(dl-dg);dg=dl;break}dg=dd;dn=""}dm=dq[du++];dw=aL(dq[du++])}}}function G(dd){this.lines=dd;this.parent=null;for(var de=0,df=dd.length,dc=0;de<df;++de){dd[de].parent=this;dc+=dd[de].height}this.height=dc}G.prototype={chunkSize:function(){return this.lines.length},remove:function(dd,dh,dc){for(var df=dd,dg=dd+dh;df<dg;++df){var de=this.lines[df];this.height-=de.height;N(de);bP(dc,de,"delete")}this.lines.splice(dd,dh)},collapse:function(dc){dc.splice.apply(dc,[dc.length,0].concat(this.lines))},insertHeight:function(dd,de,dc){this.height+=dc;this.lines=this.lines.slice(0,dd).concat(de).concat(this.lines.slice(dd));for(var df=0,dg=de.length;df<dg;++df){de[df].parent=this}},iterN:function(dc,df,de){for(var dd=dc+df;dc<dd;++dc){if(de(this.lines[dc])){return true}}}};function br(df){this.children=df;var de=0,dc=0;for(var dd=0,dh=df.length;dd<dh;++dd){var dg=df[dd];de+=dg.chunkSize();dc+=dg.height;dg.parent=this}this.size=de;this.height=dc;this.parent=null}br.prototype={chunkSize:function(){return this.size},remove:function(de,dd,dh){this.size-=dd;for(var df=0;df<this.children.length;++df){var dc=this.children[df],di=dc.chunkSize();if(de<di){var dg=Math.min(dd,di-de),dj=dc.height;dc.remove(de,dg,dh);this.height-=dj-dc.height;if(di==dg){this.children.splice(df--,1);dc.parent=null}if((dd-=dg)==0){break}de=0}else{de-=di}}if(this.size-dd<25){var dk=[];this.collapse(dk);this.children=[new G(dk)];this.children[0].parent=this}},collapse:function(dc){for(var dd=0,de=this.children.length;dd<de;++dd){this.children[dd].collapse(dc)}},insert:function(dd,de){var dc=0;for(var df=0,dg=de.length;df<dg;++df){dc+=de[df].height}this.insertHeight(dd,de,dc)},insertHeight:function(dd,dk,dj){this.size+=dk.length;this.height+=dj;for(var de=0,dg=this.children.length;de<dg;++de){var dc=this.children[de],dh=dc.chunkSize();if(dd<=dh){dc.insertHeight(dd,dk,dj);if(dc.lines&&dc.lines.length>50){while(dc.lines.length>50){var df=dc.lines.splice(dc.lines.length-25,25);var di=new G(df);dc.height-=di.height;this.children.splice(de+1,0,di);di.parent=this}this.maybeSpill()}break}dd-=dh}},maybeSpill:function(){if(this.children.length<=10){return}var df=this;do{var dd=df.children.splice(df.children.length-5,5);var de=new br(dd);if(!df.parent){var dg=new br(df.children);dg.parent=df;df.children=[dg,de];df=dg}else{df.size-=de.size;df.height-=de.height;var dc=c0(df.parent.children,df);df.parent.children.splice(dc+1,0,de)}de.parent=df.parent}while(df.children.length>10);df.parent.maybeSpill()},iter:function(de,dd,dc){this.iterN(de,dd-de,dc)},iterN:function(dc,dj,di){for(var dd=0,dg=this.children.length;dd<dg;++dd){var dh=this.children[dd],df=dh.chunkSize();if(dc<df){var de=Math.min(dj,df-dc);if(dh.iterN(dc,de,di)){return true}if((dj-=de)==0){break}dc=0}else{dc-=df}}}};function cM(dc,dg){while(!dc.lines){for(var dd=0;;++dd){var df=dc.children[dd],de=df.chunkSize();if(dg<de){dc=df;break}dg-=de}}return dc.lines[dg]}function aA(dd,dc){var de=dc-dd.height;for(var df=dd;df;df=df.parent){df.height+=de}}function k(dc){if(dc.parent==null){return null}var dg=dc.parent,df=c0(dg.lines,dc);for(var dd=dg.parent;dd;dg=dd,dd=dd.parent){for(var de=0;;++de){if(dd.children[de]==dg){break}df+=dd.children[de].chunkSize()}}return df}function aS(di,dg){var de=0;outer:do{for(var df=0,dh=di.children.length;df<dh;++df){var dd=di.children[df],dc=dd.height;if(dg<dc){di=dd;continue outer}dg-=dc;de+=dd.chunkSize()}return de}while(!di.lines);for(var df=0,dh=di.lines.length;df<dh;++df){var dk=di.lines[df],dj=dk.height;if(dg<dj){break}dg-=dj}return de+df}function bQ(dc,df){df=at(dc.view.doc,df);var dh=0,de=df.parent;for(var dg=0;dg<de.lines.length;++dg){var dd=de.lines[dg];if(dd==df){break}else{dh+=dd.height}}for(var di=de.parent;di;de=di,di=de.parent){for(var dg=0;dg<di.children.length;++dg){var dj=di.children[dg];if(dj==de){break}else{dh+=dj.height}}}return dh}function bZ(dd){var dc=dd.order;if(dc==null){dc=dd.order=bY(dd.text)}return dc}function aD(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function cy(dn,dc,dk,de,dm,dg,dd,dh,dr){var dj=dn.view.history;dj.undone.length=0;var df=+new Date,dq=aQ(dj.done);if(dq&&(dj.lastOp==dn.curOp.id||dj.lastOrigin==dm&&(dm=="input"||dm=="delete")&&dj.lastTime>df-600)){var dp=aQ(dq.events);if(dp.start>dc+de.length||dp.start+dp.added<dc){dq.events.push({start:dc,added:dk,old:de})}else{var dl=Math.max(0,dp.start-dc),ds=Math.max(0,(dc+de.length)-(dp.start+dp.added));for(var di=dl;di>0;--di){dp.old.unshift(de[di-1])}for(var di=ds;di>0;--di){dp.old.push(de[de.length-di])}if(dl){dp.start=dc}dp.added+=dk-(de.length-dl-ds)}dq.fromAfter=dh;dq.toAfter=dr}else{dq={events:[{start:dc,added:dk,old:de}],fromBefore:dg,toBefore:dd,fromAfter:dh,toAfter:dr};dj.done.push(dq);while(dj.done.length>dn.options.undoDepth){dj.done.shift()}if(dj.dirtyCounter<0){dj.dirtyCounter=NaN}else{dj.dirtyCounter++}}dj.lastTime=df;dj.lastOp=dn.curOp.id;dj.lastOrigin=dm}function aJ(){cw(this)}function j(dc){if(!dc.stop){dc.stop=aJ}return dc}function Q(dc){if(dc.preventDefault){dc.preventDefault()}else{dc.returnValue=false}}function bR(dc){if(dc.stopPropagation){dc.stopPropagation()}else{dc.cancelBubble=true}}function cw(dc){Q(dc);bR(dc)}af.e_stop=cw;af.e_preventDefault=Q;af.e_stopPropagation=bR;function bz(dc){return dc.target||dc.srcElement}function az(dd){var dc=dd.which;if(dc==null){if(dd.button&1){dc=1}else{if(dd.button&2){dc=3}else{if(dd.button&4){dc=2}}}}if(aN&&dd.ctrlKey&&dc==1){dc=3}return dc}function S(dd,de){var dc=dd.override&&dd.override.hasOwnProperty(de);return dc?dd.override[de]:dd[de]}function b8(df,dd,de){if(df.addEventListener){df.addEventListener(dd,de,false)}else{if(df.attachEvent){df.attachEvent("on"+dd,de)}else{var dg=df._handlers||(df._handlers={});var dc=dg[dd]||(dg[dd]=[]);dc.push(de)}}}function c3(dg,de,df){if(dg.removeEventListener){dg.removeEventListener(de,df,false)}else{if(dg.detachEvent){dg.detachEvent("on"+de,df)}else{var dc=dg._handlers&&dg._handlers[de];if(!dc){return}for(var dd=0;dd<dc.length;++dd){if(dc[dd]==df){dc.splice(dd,1);break}}}}}function X(dg,df){var dc=dg._handlers&&dg._handlers[df];if(!dc){return}var dd=Array.prototype.slice.call(arguments,2);for(var de=0;de<dc.length;++de){dc[de].apply(null,dd)}}function bP(dd,dj,di){var dc=dj._handlers&&dj._handlers[di];if(!dc){return}var dg=Array.prototype.slice.call(arguments,3),df=dd.curOp&&dd.curOp.delayedCallbacks;function de(dk){return function(){dk.apply(null,dg)}}for(var dh=0;dh<dc.length;++dh){if(df){df.push(de(dc[dh]))}else{dc[dh].apply(null,dg)}}}function s(de,dd){var dc=de._handlers&&de._handlers[dd];return dc&&dc.length>0}af.on=b8;af.off=c3;af.signal=X;var cA=30;var aC=af.Pass={toString:function(){return"CodeMirror.Pass"}};function h(){this.id=null}h.prototype={set:function(dc,dd){clearTimeout(this.id);this.id=setTimeout(dd,dc)}};function c6(dd,dc,df){if(dc==null){dc=dd.search(/[^\s\u00a0]/);if(dc==-1){dc=dd.length}}for(var de=0,dg=0;de<dc;++de){if(dd.charAt(de)=="\t"){dg+=df-(dg%df)}else{++dg}}return dg}af.countColumn=c6;var aT=[""];function F(dc){while(aT.length<=dc){aT.push(aQ(aT)+" ")}return aT[dc]}function aQ(dc){return dc[dc.length-1]}function bu(dc){if(aj){dc.selectionStart=0;dc.selectionEnd=dc.value.length}else{dc.select()}}function c0(df,dc){if(df.indexOf){return df.indexOf(dc)}for(var dd=0,de=df.length;dd<de;++dd){if(df[dd]==dc){return dd}}return -1}function c2(de){for(var dc=[],dd=0;dd<de;++dd){dc.push(undefined)}return dc}function bG(dd){var dc=Array.prototype.slice.call(arguments,1);return function(){return dd.apply(null,dc)}}var E=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function O(dc){return/\w/.test(dc)||dc>"\x80"&&(dc.toUpperCase()!=dc.toLowerCase()||E.test(dc))}function cb(dc){var de=0;for(var dd in dc){if(dc.hasOwnProperty(dd)&&dc[dd]){++de}}return !de}var b0=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/;function bm(dc,dg,df,de){var dh=document.createElement(dc);if(df){dh.className=df}if(de){dh.style.cssText=de}if(typeof dg=="string"){aI(dh,dg)}else{if(dg){for(var dd=0;dd<dg.length;++dd){dh.appendChild(dg[dd])}}}return dh}function ck(dc){dc.innerHTML="";return dc}function cq(dc,dd){return ck(dc).appendChild(dd)}function aI(dc,dd){if(bM){dc.innerHTML="";dc.appendChild(document.createTextNode(dd))}else{dc.textContent=dd}}var b4=function(){if(bM){return false}var dc=bm("div");return"draggable" in dc||"dragDrop" in dc}();var cP=/^$/;if(a8){cP=/$'/}else{if(bd){cP=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/}else{if(ao){cP=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/}}}var a5;function bX(dc){if(a5!=null){return a5}var dd=bm("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");cq(dc,dd);if(dd.offsetWidth){a5=dd.offsetHeight-dd.clientHeight}return a5||0}var cJ;function a0(dc){if(cJ==null){var dd=bm("span","\u200b");cq(dc,bm("span",[dd,document.createTextNode("x")]));if(dc.firstChild.offsetHeight!=0){cJ=dd.offsetWidth<=1&&dd.offsetHeight>2&&!bN}}if(cJ){return bm("span","\u200b")}else{return bm("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var cp="\n\nb".split(/\n/).length!=3?function(dh){var di=0,dc=[],dg=dh.length;while(di<=dg){var df=dh.indexOf("\n",di);if(df==-1){df=dh.length}var de=dh.slice(di,dh.charAt(df-1)=="\r"?df-1:df);var dd=de.indexOf("\r");if(dd!=-1){dc.push(de.slice(0,dd));di+=dd+1}else{dc.push(de);di=df+1}}return dc}:function(dc){return dc.split(/\r\n?|\n/)};af.splitLines=cp;var b6=window.getSelection?function(dd){try{return dd.selectionStart!=dd.selectionEnd}catch(dc){return false}}:function(de){try{var dc=de.ownerDocument.selection.createRange()}catch(dd){}if(!dc||dc.parentElement()!=de){return false}return dc.compareEndPoints("StartToEnd",dc)!=0};var bk=(function(){var dc=bm("div");if("oncopy" in dc){return true}dc.setAttribute("oncopy","return;");return typeof dc.oncopy=="function"})();var A={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};af.keyNames=A;(function(){for(var dc=0;dc<10;dc++){A[dc+48]=String(dc)}for(var dc=65;dc<=90;dc++){A[dc]=String.fromCharCode(dc)}for(var dc=1;dc<=12;dc++){A[dc+111]=A[dc+63235]="F"+dc}})();function cU(dc,dh,dg,df){if(!dc){return df(dh,dg,"ltr")}for(var de=0;de<dc.length;++de){var dd=dc[de];if(dd.from<dg&&dd.to>dh){df(Math.max(dd.from,dh),Math.min(dd.to,dg),dd.level==1?"rtl":"ltr")}}}function cd(dc){return dc.level%2?dc.to:dc.from}function co(dc){return dc.level%2?dc.from:dc.to}function a6(dd){var dc=bZ(dd);return dc?cd(dc[0]):0}function ch(dd){var dc=bZ(dd);if(!dc){return dd.text.length}return co(aQ(dc))}function v(dd,dg){var de=cM(dd.view.doc,dg);var dh=at(dd.view.doc,de);if(dh!=de){dg=k(dh)}var dc=bZ(dh);var df=!dc?0:dc[0].level%2?ch(dh):a6(dh);return{line:dg,ch:df}}function M(de,dh){var dd,df;while(dd=C(df=cM(de.view.doc,dh))){dh=dd.find().to.line}var dc=bZ(df);var dg=!dc?df.text.length:dc[0].level%2?a6(df):ch(df);return{line:dh,ch:dg}}function bA(dm,dc,de,di){var dk=bZ(dm);if(!dk){return aF(dm,dc,de,di)}var dl=di?function(dp,dn){do{dp+=dn}while(dp>0&&b0.test(dm.text.charAt(dp)));return dp}:function(dp,dn){return dp+dn};var df=dk[0].level;for(var dg=0;dg<dk.length;++dg){var dd=dk[dg],dj=dd.level%2==df;if((dd.from<dc&&dd.to>dc)||(dj&&(dd.from==dc||dd.to==dc))){break}}var dh=dl(dc,dd.level%2?-de:de);while(dh!=null){if(dd.level%2==df){if(dh<dd.from||dh>dd.to){dd=dk[dg+=de];dh=dd&&(de>0==dd.level%2?dl(dd.to,-1):dl(dd.from,1))}else{break}}else{if(dh==cd(dd)){dd=dk[--dg];dh=dd&&co(dd)}else{if(dh==co(dd)){dd=dk[++dg];dh=dd&&cd(dd)}else{break}}}}return dh<0||dh>dm.text.length?null:dh}function aF(dc,dg,dd,de){var df=dg+dd;if(de){while(df>0&&b0.test(dc.text.charAt(df))){df+=dd}}return df<0||df>dc.text.length?null:df}var bY=(function(){var dj="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL";var dh="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";function dg(dl){if(dl<=255){return dj.charAt(dl)}else{if(1424<=dl&&dl<=1524){return"R"}else{if(1536<=dl&&dl<=1791){return dh.charAt(dl-1536)}else{if(1792<=dl&&dl<=2220){return"r"}else{return"L"}}}}}var dc=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var dk=/[stwN]/,df=/[LRr]/,dd=/[Lb1n]/,di=/[1n]/;return function de(dx){if(!dc.test(dx)){return false}var dD=dx.length,dt=[],ds=null;for(var dC=0,dn;dC<dD;++dC){dt.push(dn=dg(dx.charCodeAt(dC)));if(ds==null){if(dn=="L"){ds="L"}else{if(dn=="R"||dn=="r"){ds="R"}}}}if(ds==null){ds="L"}for(var dC=0,dw=ds;dC<dD;++dC){var dn=dt[dC];if(dn=="m"){dt[dC]=dw}else{dw=dn}}for(var dC=0,dl=ds;dC<dD;++dC){var dn=dt[dC];if(dn=="1"&&dl=="r"){dt[dC]="n"}else{if(df.test(dn)){dl=dn;if(dn=="r"){dt[dC]="R"}}}}for(var dC=1,dw=dt[0];dC<dD-1;++dC){var dn=dt[dC];if(dn=="+"&&dw=="1"&&dt[dC+1]=="1"){dt[dC]="1"}else{if(dn==","&&dw==dt[dC+1]&&(dw=="1"||dw=="n")){dt[dC]=dw}}dw=dn}for(var dC=0;dC<dD;++dC){var dn=dt[dC];if(dn==","){dt[dC]="N"}else{if(dn=="%"){for(var dp=dC+1;dp<dD&&dt[dp]=="%";++dp){}var dE=(dC&&dt[dC-1]=="!")||(dp<dD-1&&dt[dp]=="1")?"1":"N";for(var dA=dC;dA<dp;++dA){dt[dA]=dE}dC=dp-1}}}for(var dC=0,dl=ds;dC<dD;++dC){var dn=dt[dC];if(dl=="L"&&dn=="1"){dt[dC]="L"}else{if(df.test(dn)){dl=dn}}}for(var dC=0;dC<dD;++dC){if(dk.test(dt[dC])){for(var dp=dC+1;dp<dD&&dk.test(dt[dp]);++dp){}var du=(dC?dt[dC-1]:ds)=="L";var dm=(dp<dD-1?dt[dp]:ds)=="L";var dE=du||dm?"L":"R";for(var dA=dC;dA<dp;++dA){dt[dA]=dE}dC=dp-1}}var dB=[],dy;for(var dC=0;dC<dD;){if(dd.test(dt[dC])){var dq=dC;for(++dC;dC<dD&&dd.test(dt[dC]);++dC){}dB.push({from:dq,to:dC,level:0})}else{var dr=dC,dv=dB.length;for(++dC;dC<dD&&dt[dC]!="L";++dC){}for(var dA=dr;dA<dC;){if(di.test(dt[dA])){if(dr<dA){dB.splice(dv,0,{from:dr,to:dA,level:1})}var dz=dA;for(++dA;dA<dC&&di.test(dt[dA]);++dA){}dB.splice(dv,0,{from:dz,to:dA,level:2});dr=dA}else{++dA}}if(dr<dC){dB.splice(dv,0,{from:dr,to:dC,level:1})}}}if(dB[0].level==1&&(dy=dx.match(/^\s+/))){dB[0].from=dy[0].length;dB.unshift({from:0,to:dy[0].length,level:0})}if(aQ(dB).level==1&&(dy=dx.match(/\s+$/))){aQ(dB).to-=dy[0].length;dB.push({from:dD-dy[0].length,to:dD,level:0})}if(dB[0].level!=aQ(dB).level){dB.push({from:dD,to:dD,level:dB[0].level})}return dB}})();af.version="3.0";return af})();(function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b){return/^[;{}]$/.test(b)}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(b,c,a,d){if(this.jsonMode){return/^[\[,{]$/.test(c)||/^}/.test(a)}else{if(c==";"&&d.lexical&&d.lexical.type==")"){return false}return/^[;{}]$/.test(c)&&!/^;/.test(a)}}});CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(b,c,a){return b=="tag"&&/>$/.test(c)||/^</.test(a)}});CodeMirror.defineExtension("commentRange",function(b,e,d){var a=this,c=CodeMirror.innerMode(a.getMode(),a.getTokenAt(e).state).mode;a.operation(function(){if(b){a.replaceRange(c.commentEnd,d);a.replaceRange(c.commentStart,e);if(e.line==d.line&&e.ch==d.ch){a.setCursor(e.line,e.ch+c.commentStart.length)}}else{var h=a.getRange(e,d);var g=h.indexOf(c.commentStart);var f=h.lastIndexOf(c.commentEnd);if(g>-1&&f>-1&&f>g){h=h.substr(0,g)+h.substring(g+c.commentStart.length,f)+h.substr(f+c.commentEnd.length)}a.replaceRange(h,e,d)}})});CodeMirror.defineExtension("autoIndentRange",function(c,b){var a=this;this.operation(function(){for(var d=c.line;d<=b.line;d++){a.indentLine(d,"smart")}})});CodeMirror.defineExtension("autoFormatRange",function(h,j){var k=this;var o=k.getMode(),n=k.getRange(h,j).split("\n");var c=CodeMirror.copyState(o,k.getTokenAt(h).state);var g=k.getOption("tabSize");var e="",q=0,a=h.ch==0;function d(){e+="\n";a=true;++q}for(var f=0;f<n.length;++f){var m=new CodeMirror.StringStream(n[f],g);while(!m.eol()){var p=CodeMirror.innerMode(o,c);var b=o.token(m,c),l=m.current();m.start=m.pos;if(!a||/\S/.test(l)){e+=l;a=false}if(!a&&p.mode.newlineAfterToken&&p.mode.newlineAfterToken(b,l,m.string.slice(m.pos)||n[f+1]||"",p.state)){d()}}if(!m.pos&&o.blankLine){o.blankLine(c)}if(!a){d()}}k.operation(function(){k.replaceRange(e,h,j);for(var r=h.line+1,i=h.line+q;r<=i;++r){k.indentLine(r,"smart")}k.setSelection(h,k.getCursor(false))})})})();(function(){var e={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function b(o){var p=o.getCursor(),t=o.getLineHandle(p.line),n=p.ch-1;var h=(n>=0&&e[t.text.charAt(n)])||e[t.text.charAt(++n)];if(!h){return null}var j=h.charAt(1)==">",l=j?1:-1;var f=o.getTokenAt({line:p.line,ch:n+1}).type;var m=[t.text.charAt(n)],q=/[(){}[\]]/;function s(u,z,y){if(!u.text){return}var x=j?0:u.text.length-1,i=j?u.text.length:-1;if(y!=null){x=y+l}for(;x!=i;x+=l){var w=u.text.charAt(x);if(q.test(w)&&o.getTokenAt({line:z,ch:x+1}).type==f){var v=e[w];if(v.charAt(1)==">"==j){m.push(w)}else{if(m.pop()!=v.charAt(0)){return{pos:x,match:false}}else{if(!m.length){return{pos:x,match:true}}}}}}}for(var g=p.line,r,k=j?Math.min(g+100,o.lineCount()):Math.max(-1,g-100);g!=k;g+=l){if(g==p.line){r=s(t,g,n)}else{r=s(o.getLineHandle(g),g)}if(r){break}}return{from:{line:p.line,ch:n},to:r&&{line:g,ch:r.pos},match:r&&r.match}}function a(g,l){var k=b(g);if(!k){return}var j=k.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var i=g.markText(k.from,{line:k.from.line,ch:k.from.ch+1},{className:j});var h=k.to&&g.markText(k.to,{line:k.to.line,ch:k.to.ch+1},{className:j});var f=function(){g.operation(function(){i.clear();h&&h.clear()})};if(l){setTimeout(f,800)}else{return f}}var c=null;function d(f){f.operation(function(){if(c){c();c=null}if(!f.somethingSelected()){c=a(f,false)}})}CodeMirror.defineOption("matchBrackets",false,function(f,g){if(g){f.on("cursorActivity",d)}else{f.off("cursorActivity",d)}});CodeMirror.defineExtension("matchBrackets",function(){a(this,true)});CodeMirror.defineExtension("findMatchingBracket",function(){return b(this)})})();(function(){function g(o,q){for(var p=0,r=o.length;p<r;++p){q(o[p])}}function e(o,q){if(!Array.prototype.indexOf){var p=o.length;while(p--){if(o[p]===q){return true}}return false}return o.indexOf(q)!=-1}function h(s,r,v){var u=s.getCursor(),q=v(s,u),o=q;if(!/^[\w$_]*$/.test(q.string)){q=o={start:u.ch,end:u.ch,string:"",state:q.state,className:q.string==":"?"pig-type":null}}if(!p){var p=[]}p.push(o);var t=j(q,p);t=t.sort();if(t.length==1){t.push(" ")}return{list:t,from:{line:u.line,ch:q.start},to:{line:u.line,ch:q.end}}}CodeMirror.pigHint=function(o){return h(o,n,function(p,q){return p.getTokenAt(q)})};var i="VOID IMPORT RETURNS DEFINE LOAD FILTER FOREACH ORDER CUBE DISTINCT COGROUP JOIN CROSS UNION SPLIT INTO IF OTHERWISE ALL AS BY USING INNER OUTER ONSCHEMA PARALLEL PARTITION GROUP AND OR NOT GENERATE FLATTEN ASC DESC IS STREAM THROUGH STORE MAPREDUCE SHIP CACHE INPUT OUTPUT STDERROR STDIN STDOUT LIMIT SAMPLE LEFT RIGHT FULL EQ GT LT GTE LTE NEQ MATCHES TRUE FALSE";var n=i.split(" ");var f=i.toLowerCase().split(" ");var m="BOOLEAN INT LONG FLOAT DOUBLE CHARARRAY BYTEARRAY BAG TUPLE MAP";var l=m.split(" ");var b=m.toLowerCase().split(" ");var c="ABS ACOS ARITY ASIN ATAN AVG BAGSIZE BINSTORAGE BLOOM BUILDBLOOM CBRT CEIL CONCAT COR COS COSH COUNT COUNT_STAR COV CONSTANTSIZE CUBEDIMENSIONS DIFF DISTINCT DOUBLEABS DOUBLEAVG DOUBLEBASE DOUBLEMAX DOUBLEMIN DOUBLEROUND DOUBLESUM EXP FLOOR FLOATABS FLOATAVG FLOATMAX FLOATMIN FLOATROUND FLOATSUM GENERICINVOKER INDEXOF INTABS INTAVG INTMAX INTMIN INTSUM INVOKEFORDOUBLE INVOKEFORFLOAT INVOKEFORINT INVOKEFORLONG INVOKEFORSTRING INVOKER ISEMPTY JSONLOADER JSONMETADATA JSONSTORAGE LAST_INDEX_OF LCFIRST LOG LOG10 LOWER LONGABS LONGAVG LONGMAX LONGMIN LONGSUM MAX MIN MAPSIZE MONITOREDUDF NONDETERMINISTIC OUTPUTSCHEMA  PIGSTORAGE PIGSTREAMING RANDOM REGEX_EXTRACT REGEX_EXTRACT_ALL REPLACE ROUND SIN SINH SIZE SQRT STRSPLIT SUBSTRING SUM STRINGCONCAT STRINGMAX STRINGMIN STRINGSIZE TAN TANH TOBAG TOKENIZE TOMAP TOP TOTUPLE TRIM TEXTLOADER TUPLESIZE UCFIRST UPPER UTF8STORAGECONVERTER";var d=c.split(" ").join("() ").split(" ");var k=c.toLowerCase().split(" ").join("() ").split(" ");var a=("BagSize BinStorage Bloom BuildBloom ConstantSize CubeDimensions DoubleAbs DoubleAvg DoubleBase DoubleMax DoubleMin DoubleRound DoubleSum FloatAbs FloatAvg FloatMax FloatMin FloatRound FloatSum GenericInvoker IntAbs IntAvg IntMax IntMin IntSum InvokeForDouble InvokeForFloat InvokeForInt InvokeForLong InvokeForString Invoker IsEmpty JsonLoader JsonMetadata JsonStorage LongAbs LongAvg LongMax LongMin LongSum MapSize MonitoredUDF Nondeterministic OutputSchema PigStorage PigStreaming StringConcat StringMax StringMin StringSize TextLoader TupleSize Utf8StorageConverter").split(" ").join("() ").split(" ");function j(q,p){var s=[],v=q.string;function u(w){if(w.indexOf(v)==0&&!e(s,w)){s.push(w)}}function o(w){if(w==":"){g(b,u)}else{g(d,u);g(k,u);g(a,u);g(l,u);g(b,u);g(n,u);g(f,u)}}if(p){var t=p.pop(),r;if(t.type=="variable"){r=t.string}else{if(t.type=="variable-3"){r=":"+t.string}}while(r!=null&&p.length){r=r[p.pop().string]}if(r!=null){o(r)}}return s}})();(function(){CodeMirror.defineOption("autoCloseTags",false,function(e,h,f){if(h&&(f==CodeMirror.Init||!f)){var g={name:"autoCloseTags"};if(typeof h!="object"||h.whenClosing){g["'/'"]=function(i){d(i,"/")}}if(typeof h!="object"||h.whenOpening){g["'>'"]=function(i){d(i,">")}}e.addKeyMap(g)}else{if(!h&&(f!=CodeMirror.Init&&f)){e.removeKeyMap("autoCloseTags")}}});var b=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var a=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function d(o,e){var n=o.getCursor(),p=o.getTokenAt(n);var q=CodeMirror.innerMode(o.getMode(),p.state),f=q.state;if(q.mode.name!="xml"){throw CodeMirror.Pass}var g=o.getOption("autoCloseTags"),j=q.mode.configuration=="html";var h=(typeof g=="object"&&g.dontCloseTags)||(j&&b);var l=(typeof g=="object"&&g.indentTags)||(j&&a);if(e==">"&&f.tagName){var i=f.tagName;if(p.end>n.ch){i=i.slice(0,i.length-p.end+n.ch)}var k=i.toLowerCase();if(p.type=="tag"&&f.type=="closeTag"||/\/\s*$/.test(p.string)||h&&c(h,k)>-1){throw CodeMirror.Pass}var m=l&&c(l,k)>-1;o.replaceSelection(">"+(m?"\n\n":"")+"</"+i+">",m?{line:n.line+1,ch:0}:{line:n.line,ch:n.ch+1});if(m){o.indentLine(n.line+1);o.indentLine(n.line+2)}return}else{if(e=="/"&&p.type=="tag"&&p.string=="<"){var i=f.context&&f.context.tagName;if(i){o.replaceSelection("/"+i+">","end")}return}}throw CodeMirror.Pass}function c(j,f){if(j.indexOf){return j.indexOf(f)}for(var g=0,h=j.length;g<h;++g){if(j[g]==f){return g}}return -1}})();CodeMirror.colorize=(function(){var a=/^(p|li|div|h\\d|pre|blockquote|td)$/;function b(e,c){if(e.nodeType==3){return c.push(e.nodeValue)}for(var d=e.firstChild;d;d=d.nextSibling){b(d,c);if(a.test(e.nodeType)){c.push("\n")}}}return function(h,c){if(!h){h=document.body.getElementsByTagName("pre")}for(var d=0;d<h.length;++d){var e=h[d];var g=e.getAttribute("data-lang")||c;if(!g){continue}var f=[];b(e,f);e.innerHTML="";CodeMirror.runMode(f.join(""),g,e);e.className+=" cm-s-default"}}})();(function(){var d=2;function c(){this.marked=[]}function a(f){return f._matchHighlightState||(f._matchHighlightState=new c())}function e(f){var h=a(f);for(var g=0;g<h.marked.length;++g){h.marked[g].clear()}h.marked=[]}function b(f,g,h){e(f);h=(typeof h!=="undefined"?h:d);if(f.somethingSelected()&&f.getSelection().replace(/^\s+|\s+$/g,"").length>=h){var j=a(f);var i=f.getSelection();f.operation(function(){if(f.lineCount()<2000){for(var k=f.getSearchCursor(i);k.findNext();){if(k.from().line!==f.getCursor(true).line||k.from().ch!==f.getCursor(true).ch){j.marked.push(f.markText(k.from(),k.to(),{className:g}))}}}})}}CodeMirror.defineExtension("matchHighlight",function(f,g){b(this,f,g)})})();CodeMirror.overlayMode=CodeMirror.overlayParser=function(b,a,c){return{startState:function(){return{base:CodeMirror.startState(b),overlay:CodeMirror.startState(a),basePos:0,baseCur:null,overlayPos:0,overlayCur:null}},copyState:function(d){return{base:CodeMirror.copyState(b,d.base),overlay:CodeMirror.copyState(a,d.overlay),basePos:d.basePos,baseCur:null,overlayPos:d.overlayPos,overlayCur:null}},token:function(e,d){if(e.start==d.basePos){d.baseCur=b.token(e,d.base);d.basePos=e.pos}if(e.start==d.overlayPos){e.pos=e.start;d.overlayCur=a.token(e,d.overlay);d.overlayPos=e.pos}e.pos=Math.min(d.basePos,d.overlayPos);if(e.eol()){d.basePos=d.overlayPos=0}if(d.overlayCur==null){return d.baseCur}if(d.baseCur!=null&&c){return d.baseCur+" "+d.overlayCur}else{return d.overlayCur}},indent:b.indent&&function(e,d){return b.indent(e.base,d)},electricChars:b.electricChars,innerMode:function(d){return{state:d.base,mode:b}},blankLine:function(d){if(b.blankLine){b.blankLine(d.base)}if(a.blankLine){a.blankLine(d.overlay)}}}};function splitLines(a){return a.split(/\r?\n|\r/)}function StringStream(a){this.pos=this.start=0;this.string=a}StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||null},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(a){var c=this.string.charAt(this.pos);if(typeof a=="string"){var b=c==a}else{var b=c&&(a.test?a.test(c):a(c))}if(b){++this.pos;return c}},eatWhile:function(a){var b=this.pos;while(this.eat(a)){}return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1){this.pos=b;return true}},backUp:function(a){this.pos-=a},column:function(){return this.start},indentation:function(){return 0},match:function(d,b,a){if(typeof d=="string"){function e(f){return a?f.toLowerCase():f}if(e(this.string).indexOf(e(d),this.pos)==this.pos){if(b!==false){this.pos+=d.length}return true}}else{var c=this.string.slice(this.pos).match(d);if(c&&b!==false){this.pos+=c[0].length}return c}},current:function(){return this.string.slice(this.start,this.pos)}};exports.StringStream=StringStream;exports.startState=function(c,b,a){return c.startState?c.startState(b,a):true};var modes=exports.modes={},mimeModes=exports.mimeModes={};exports.defineMode=function(a,b){modes[a]=b};exports.defineMIME=function(b,a){mimeModes[b]=a};exports.getMode=function(c,a){if(typeof a=="string"&&mimeModes.hasOwnProperty(a)){a=mimeModes[a]}if(typeof a=="string"){var e=a,b={}}else{if(a!=null){var e=a.name,b=a}}var d=modes[e];if(!d){throw new Error("Unknown mode: "+a)}return d(c,b||{})};exports.runMode=function(g,c,k){var f=exports.getMode({indentUnit:2},c);var l=splitLines(g),b=exports.startState(f);for(var d=0,h=l.length;d<h;++d){if(d){k("\n")}var j=new exports.StringStream(l[d]);while(!j.eol()){var a=f.token(j,b);k(j.current(),a,d,j.start);j.start=j.pos}}};(function(){CodeMirror.commands.newlineAndIndentContinueMarkdownList=function(j){var g=j.getCursor(),c=j.getTokenAt(g);var a;if(c.className=="string"){var f=j.getRange({line:g.line,ch:0},{line:g.line,ch:c.end});var h=/\*|\d+\./,k;if(c.string.search(h)==0){var b=/^[\W]*(\d+)\./g;var e=b.exec(f);if(e){k=(parseInt(e[1])+1)+".  "}else{k="*   "}a=f.slice(0,c.start);if(!/^\s*$/.test(a)){a="";for(var d=0;d<c.start;++d){a+=" "}}}}if(a!=null){j.replaceSelection("\n"+a+k,"end")}else{j.execCommand("newlineAndIndent")}}})();(function(){CodeMirror.xmlHints=[];CodeMirror.xmlHint=function(d,f){if(f.length>0){var e=d.getCursor();d.replaceSelection(f);e={line:e.line,ch:e.ch+1};d.setCursor(e)}CodeMirror.simpleHint(d,a)};var a=function(d){var k=d.getCursor();if(k.ch>0){var j=d.getRange({line:0,ch:0},k);var h="";var l="";for(var e=j.length-1;e>=0;e--){if(j[e]==" "||j[e]=="<"){l=j[e];break}else{h=j[e]+h}}j=j.slice(0,j.length-h.length);var g=b(j)+l;var f=CodeMirror.xmlHints[g];if(typeof f==="undefined"){f=[""]}else{f=f.slice(0);for(var e=f.length-1;e>=0;e--){if(f[e].indexOf(h)!=0){f.splice(e,1)}}}return{list:f,from:{line:k.line,ch:k.ch-h.length},to:k}}};var b=function(l){var f="";if(l.length>=0){var j=new RegExp("<([^!?][^\\s/>]*).*?>","g");var k=[];var d;while((d=j.exec(l))!=null){k.push({tag:d[1],selfclose:(d[0].slice(d[0].length-2)==="/>")})}for(var e=k.length-1,h=0;e>=0;e--){var g=k[e];if(g.tag[0]=="/"){h++}else{if(g.selfclose==false){if(h>0){h--}else{f="<"+g.tag+">"+f}}}}f+=c(l)}return f};var c=function(g){var d=g.lastIndexOf("<");var f=g.lastIndexOf(">");if(f<d){g=g.slice(d);if(g!="<"){var e=g.indexOf(" ");if(e<0){e=g.indexOf("\t")}if(e<0){e=g.indexOf("\n")}if(e<0){e=g.length}return g.slice(0,e)}}return""}})();(function(){var b=["clike","css","javascript"];for(var a=0;a<b.length;++a){CodeMirror.extendMode(b[a],{blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * "})}CodeMirror.commands.newlineAndIndentContinueComment=function(k){var j=k.getCursor(),d=k.getTokenAt(j);var g=CodeMirror.innerMode(k.getMode(),d.state).mode;var c;if(d.type=="comment"&&g.blockCommentStart){var e=d.string.indexOf(g.blockCommentEnd);var h=k.getRange({line:j.line,ch:0},{line:j.line,ch:d.end}),l;if(e!=-1&&e==d.string.length-g.blockCommentEnd.length){}else{if(d.string.indexOf(g.blockCommentStart)==0){c=h.slice(0,d.start);if(!/^\s*$/.test(c)){c="";for(var f=0;f<d.start;++f){c+=" "}}}else{if((l=h.indexOf(g.blockCommentContinue))!=-1&&l+g.blockCommentContinue.length>d.start&&/^\s*$/.test(h.slice(0,l))){c=h.slice(0,l)}}}}if(c!=null){k.replaceSelection("\n"+c+g.blockCommentContinue,"end")}else{k.execCommand("newlineAndIndent")}}})();(function(){function k(){this.posFrom=this.posTo=this.query=null;this.marked=[]}function f(o){return o._searchState||(o._searchState=new k())}function m(o,p,q){return o.getSearchCursor(p,q,typeof p=="string"&&p==p.toLowerCase())}function j(o,r,p,q){if(o.openDialog){o.openDialog(r,q)}else{q(prompt(p,""))}}function n(p,r,q,o){if(p.openConfirm){p.openConfirm(r,o)}else{if(confirm(q)){o[0]()}}}function c(p){var o=p.match(/^\/(.*)\/([a-z]*)$/);return o?new RegExp(o[1],o[2].indexOf("i")==-1?"":"i"):p}var b='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';function i(o,p){var q=f(o);if(q.query){return g(o,p)}j(o,b,"Search for:",function(r){o.operation(function(){if(!r||q.query){return}q.query=c(r);if(o.lineCount()<2000){for(var s=m(o,q.query);s.findNext();){q.marked.push(o.markText(s.from(),s.to(),{className:"CodeMirror-searching"}))}}q.posFrom=q.posTo=o.getCursor();g(o,p)})})}function g(o,p){o.operation(function(){var q=f(o);var r=m(o,q.query,p?q.posFrom:q.posTo);if(!r.find(p)){r=m(o,q.query,p?{line:o.lineCount()-1}:{line:0,ch:0});if(!r.find(p)){return}}o.setSelection(r.from(),r.to());q.posFrom=r.from();q.posTo=r.to()})}function l(o){o.operation(function(){var q=f(o);if(!q.query){return}q.query=null;for(var p=0;p<q.marked.length;++p){q.marked[p].clear()}q.marked.length=0})}var e='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';var h='With: <input type="text" style="width: 10em"/>';var d="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";function a(o,p){j(o,e,"Replace:",function(q){if(!q){return}q=c(q);j(o,h,"Replace with:",function(u){if(p){o.operation(function(){for(var w=m(o,q);w.findNext();){if(typeof q!="string"){var v=o.getRange(w.from(),w.to()).match(q);w.replace(u.replace(/\$(\d)/,function(x,y){return v[y]}))}else{w.replace(u)}}})}else{l(o);var t=m(o,q,o.getCursor());function s(){var w=t.from(),v;if(!(v=t.findNext())){t=m(o,q);if(!(v=t.findNext())||(w&&t.from().line==w.line&&t.from().ch==w.ch)){return}}o.setSelection(t.from(),t.to());n(o,d,"Replace?",[function(){r(v)},s])}function r(v){t.replace(typeof q=="string"?u:u.replace(/\$(\d)/,function(w,x){return v[x]}));s()}s()}})})}CodeMirror.commands.find=function(o){l(o);i(o)};CodeMirror.commands.findNext=i;CodeMirror.commands.findPrev=function(o){i(o,true)};CodeMirror.commands.clearSearch=l;CodeMirror.commands.replace=a;CodeMirror.commands.replaceAll=function(o){a(o,true)}})();(function(){function e(k,m){for(var l=0,n=k.length;l<n;++l){m(k[l])}}function c(k,m){if(!Array.prototype.indexOf){var l=k.length;while(l--){if(k[l]===m){return true}}return false}return k.indexOf(m)!=-1}function f(o,n,p,r){var q=o.getCursor(),m=p(o,q),s=m;if(!/^[\w$_]*$/.test(m.string)){m=s={start:q.ch,end:q.ch,string:"",state:m.state,type:m.string=="."?"property":null}}while(s.type=="property"){s=p(o,{line:q.line,ch:s.start});if(s.string!="."){return}s=p(o,{line:q.line,ch:s.start});if(s.string==")"){var k=1;do{s=p(o,{line:q.line,ch:s.start});switch(s.string){case")":k++;break;case"(":k--;break;default:break}}while(k>0);s=p(o,{line:q.line,ch:s.start});if(s.type=="variable"){s.type="function"}else{return}}if(!l){var l=[]}l.push(s)}return{list:g(m,l,n,r),from:{line:q.line,ch:m.start},to:{line:q.line,ch:m.end}}}CodeMirror.javascriptHint=function(l,k){return f(l,b,function(m,n){return m.getTokenAt(n)},k)};function a(l,m){var k=l.getTokenAt(m);if(m.ch==k.start+1&&k.string.charAt(0)=="."){k.end=k.start;k.string=".";k.type="property"}else{if(/^\.[\w$_]*$/.test(k.string)){k.type="property";k.start++;k.string=k.string.replace(/\./,"")}}return k}CodeMirror.coffeescriptHint=function(l,k){return f(l,i,a,k)};var h=("charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search").split(" ");var j=("length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ").split(" ");var d="prototype apply call bind".split(" ");var b=("break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with").split(" ");var i=("and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes").split(" ");function g(o,m,r,u){var t=[],l=o.string;function p(v){if(v.indexOf(l)==0&&!c(t,v)){t.push(v)}}function n(w){if(typeof w=="string"){e(h,p)}else{if(w instanceof Array){e(j,p)}else{if(w instanceof Function){e(d,p)}}}for(var v in w){p(v)}}if(m){var q=m.pop(),k;if(q.type=="variable"){if(u&&u.additionalContext){k=u.additionalContext[q.string]}k=k||window[q.string]}else{if(q.type=="string"){k=""}else{if(q.type=="atom"){k=1}else{if(q.type=="function"){if(window.jQuery!=null&&(q.string=="$"||q.string=="jQuery")&&(typeof window.jQuery=="function")){k=window.jQuery()}else{if(window._!=null&&(q.string=="_")&&(typeof window._=="function")){k=window._()}}}}}}while(k!=null&&m.length){k=k[m.pop().string]}if(k!=null){n(k)}}else{for(var s=o.state.localVars;s;s=s.next){p(s.name)}n(window);e(r,p)}return t}})();CodeMirror.multiplexingMode=function(b){var d=Array.prototype.slice.call(arguments,1);var a=d.length;function c(f,g,h){if(typeof g=="string"){return f.indexOf(g,h)}var e=g.exec(h?f.slice(h):f);return e?e.index+h:-1}return{startState:function(){return{outer:CodeMirror.startState(b),innerActive:null,inner:null}},copyState:function(e){return{outer:CodeMirror.copyState(b,e.outer),innerActive:e.innerActive,inner:e.innerActive&&CodeMirror.copyState(e.innerActive.mode,e.inner)}},token:function(o,e){if(!e.innerActive){var g=Infinity,l=o.string;for(var h=0;h<a;++h){var k=d[h];var p=c(l,k.open,o.pos);if(p==o.pos){o.match(k.open);e.innerActive=k;e.inner=CodeMirror.startState(k.mode,b.indent?b.indent(e.outer,""):0);return k.delimStyle}else{if(p!=-1&&p<g){g=p}}}if(g!=Infinity){o.string=l.slice(0,g)}var f=b.token(o,e.outer);if(g!=Infinity){o.string=l}return f}else{var j=e.innerActive,l=o.string;var p=c(l,j.close,o.pos);if(p==o.pos){o.match(j.close);e.innerActive=e.inner=null;return j.delimStyle}if(p>-1){o.string=l.slice(0,p)}var n=j.mode.token(o,e.inner);if(p>-1){o.string=l}var m=o.current(),p=m.indexOf(j.close);if(p>-1){o.backUp(m.length-p)}return n}},indent:function(f,e){var g=f.innerActive?f.innerActive.mode:b;if(!g.indent){return CodeMirror.Pass}return g.indent(f.innerActive?f.inner:f.outer,e)},blankLine:function(g){var h=g.innerActive?g.innerActive.mode:b;if(h.blankLine){h.blankLine(g.innerActive?g.inner:g.outer)}if(!g.innerActive){for(var f=0;f<a;++f){var e=d[f];if(e.open==="\n"){g.innerActive=e;g.inner=CodeMirror.startState(e.mode,h.indent?h.indent(g.outer,""):0)}}}else{if(h.close==="\n"){g.innerActive=g.inner=null}}},electricChars:b.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:b}}}};CodeMirror.tagRangeFinder=function(k,f){var u="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var y=u+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var c=new RegExp("^["+u+"]["+y+"]*");var e=k.getLine(f.line);var o=false;var z=null;var g=f.ch;while(!o){g=e.indexOf("<",g);if(-1==g){return}if(g+1<e.length&&e[g+1]=="/"){g++;continue}if(!e.substr(g+1).match(c)){g++;continue}var n=e.indexOf(">",g+1);if(-1==n){var t=f.line+1;var p=false;var a=k.lineCount();while(t<a&&!p){var h=k.getLine(t);n=h.indexOf(">");if(-1!=n){p=true;var q=h.lastIndexOf("/",n);if(-1!=q&&q<n){var r=e.substr(q,n-q+1);if(!r.match(/\/\s*\>/)){return}}}t++}o=true}else{var w=e.lastIndexOf("/",n);if(-1==w){o=true}else{var r=e.substr(w,n-w+1);if(!r.match(/\/\s*\>/)){o=true}}}if(o){var b=e.substr(g+1);z=b.match(c);if(z){z=z[0];if(-1!=e.indexOf("</"+z+">",g)){o=false}}else{o=false}}if(!o){g++}}if(o){var s="(\\<\\/"+z+"\\>)|(\\<"+z+"\\>)|(\\<"+z+"\\s)|(\\<"+z+"$)";var d=new RegExp(s);var m="</"+z+">";var x=1;var t=f.line+1;var a=k.lineCount();while(t<a){e=k.getLine(t);var j=e.match(d);if(j){for(var v=0;v<j.length;v++){if(j[v]==m){x--}else{x++}if(!x){return{from:{line:f.line,ch:n+1},to:{line:t,ch:j.index}}}}}t++}return}};CodeMirror.braceRangeFinder=function(l,a){var q=a.line,j=l.getLine(q);var b=j.length,r,n;for(;;){var p=j.lastIndexOf("{",b);if(p<a.ch){break}n=l.getTokenAt({line:q,ch:p}).type;if(!/^(comment|string)/.test(n)){r=p;break}b=p-1}if(r==null||j.lastIndexOf("}")>r){return}var g=1,k=l.lineCount(),c,e;outer:for(var d=q+1;d<k;++d){var o=l.getLine(d),h=0;for(;;){var f=o.indexOf("{",h),m=o.indexOf("}",h);if(f<0){f=o.length}if(m<0){m=o.length}h=Math.min(f,m);if(h==o.length){break}if(l.getTokenAt({line:d,ch:h+1}).type==n){if(h==f){++g}else{if(!--g){c=d;e=h;break outer}}}++h}}if(c==null||c==q+1){return}return{from:{line:q,ch:r+1},to:{line:c,ch:e}}};CodeMirror.indentRangeFinder=function(b,h){var g=b.getOption("tabSize"),e=b.getLine(h.line);var d=CodeMirror.countColumn(e,null,g);for(var f=h.line+1,c=b.lineCount();f<c;++f){var a=b.getLine(f);if(CodeMirror.countColumn(a,null,g)<d){return{from:{line:h.line,ch:e.length},to:{line:f,ch:a.length}}}}};CodeMirror.newFoldFunction=function(c,a){if(a==null){a="\u2194"}if(typeof a=="string"){var b=document.createTextNode(a);a=document.createElement("span");a.appendChild(b);a.className="CodeMirror-foldmarker"}return function(d,l){if(typeof l=="number"){l={line:l,ch:0}}var f=c(d,l);if(!f){return}var k=d.findMarksAt(f.from),e=0;for(var g=0;g<k.length;++g){if(k[g].__isFold){++e;k[g].clear()}}if(e){return}var h=a.cloneNode(true);CodeMirror.on(h,"mousedown",function(){j.clear()});var j=d.markText(f.from,f.to,{replacedWith:h,clearOnEnter:true,__isFold:true})}};CodeMirror.runMode=function(j,f,n,p){var h=CodeMirror.getMode(CodeMirror.defaults,f);if(n.nodeType==1){var k=(p&&p.tabSize)||CodeMirror.defaults.tabSize;var d=n,c=0;d.innerHTML="";n=function(v,s){if(v=="\n"){d.appendChild(document.createElement("br"));c=0;return}var t="";for(var w=0;;){var e=v.indexOf("\t",w);if(e==-1){t+=v.slice(w);c+=v.length-w;break}else{c+=e-w;t+=v.slice(w,e);var r=k-c%k;c+=r;for(var q=0;q<r;++q){t+=" "}w=e+1}}if(s){var u=d.appendChild(document.createElement("span"));u.className="cm-"+s.replace(/ +/g," cm-");u.appendChild(document.createTextNode(t))}else{d.appendChild(document.createTextNode(t))}}}var o=CodeMirror.splitLines(j),b=CodeMirror.startState(h);for(var g=0,l=o.length;g<l;++g){if(g){n("\n")}var m=new CodeMirror.StringStream(o[g]);while(!m.eol()){var a=h.token(m,b);n(m.current(),a,g,m.start);m.start=m.pos}}};(function(){CodeMirror.simpleHint=function(e,b,a){var c={},g=CodeMirror.simpleHint.defaults;for(var d in g){if(g.hasOwnProperty(d)){c[d]=(a&&a.hasOwnProperty(d)?a:g)[d]}}function f(r){if(e.somethingSelected()){return}var o=e.getTokenAt(e.getCursor());if(c.closeOnTokenChange&&r!=null&&(o.start!=r.start||o.type!=r.type)){return}var v=b(e,a);if(!v||!v.list.length){return}var s=v.list;function t(i){e.replaceRange(i,v.from,v.to)}if(c.completeSingle&&s.length==1){t(s[0]);return true}var j=document.createElement("div");j.className="CodeMirror-completions";var k=j.appendChild(document.createElement("select"));if(!window.opera){k.multiple=true}for(var m=0;m<s.length;++m){var h=k.appendChild(document.createElement("option"));h.appendChild(document.createTextNode(s[m]))}k.firstChild.selected=true;k.size=Math.min(10,s.length);var q=e.cursorCoords(c.alignWithWord?v.from:null);j.style.left=q.left+"px";j.style.top=q.bottom+"px";document.body.appendChild(j);var p=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);if(p-q.left<k.clientWidth){j.style.left=(q.left-k.clientWidth)+"px"}if(s.length<=10){j.style.width=(k.clientWidth-1)+"px"}var l=false;function u(){if(l){return}l=true;j.parentNode.removeChild(j)}function n(){t(s[k.selectedIndex]);u();setTimeout(function(){e.focus()},50)}CodeMirror.on(k,"blur",u);CodeMirror.on(k,"keydown",function(w){var i=w.keyCode;if(i==13){CodeMirror.e_stop(w);n()}else{if(i==27){CodeMirror.e_stop(w);u();e.focus()}else{if(i!=38&&i!=40&&i!=33&&i!=34&&!CodeMirror.isModifierKey(w)){u();e.focus();e.triggerOnKeyDown(w);if(!c.closeOnBackspace||i!=8){setTimeout(function(){f(o)},50)}}}}});CodeMirror.on(k,"dblclick",n);k.focus();if(window.opera){setTimeout(function(){if(!l){k.focus()}},100)}return true}return f()};CodeMirror.simpleHint.defaults={closeOnBackspace:true,closeOnTokenChange:false,completeSingle:true,alignWithWord:true}})();(function(){if(!CodeMirror.modeURL){CodeMirror.modeURL="../mode/%N/%N.js"}var c={};function b(d,f){var e=f;return function(){if(--e==0){d()}}}function a(j,d){var h=CodeMirror.modes[j].dependencies;if(!h){return d()}var g=[];for(var f=0;f<h.length;++f){if(!CodeMirror.modes.hasOwnProperty(h[f])){g.push(h[f])}}if(!g.length){return d()}var e=b(d,g.length);for(var f=0;f<g.length;++f){CodeMirror.requireMode(g[f],e)}}CodeMirror.requireMode=function(j,d){if(typeof j!="string"){j=j.name}if(CodeMirror.modes.hasOwnProperty(j)){return a(j,d)}if(c.hasOwnProperty(j)){return c[j].push(d)}var e=document.createElement("script");e.src=CodeMirror.modeURL.replace(/%N/g,j);var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(e,f);var h=c[j]=[d];var g=0,i=setInterval(function(){if(++g>100){return clearInterval(i)}if(CodeMirror.modes.hasOwnProperty(j)){clearInterval(i);c[j]=null;a(j,function(){for(var k=0;k<h.length;++k){h[k]()}})}},200)};CodeMirror.autoLoadMode=function(d,e){if(!CodeMirror.modes.hasOwnProperty(e)){CodeMirror.requireMode(e,function(){d.setOption("mode",d.getOption("mode"))})}}}());(function(){function a(b,e,g,d){this.atOccurrence=false;this.cm=b;if(d==null&&typeof e=="string"){d=false}g=g?b.clipPos(g):{line:0,ch:0};this.pos={from:g,to:g};if(typeof e!="string"){if(!e.global){e=new RegExp(e.source,e.ignoreCase?"ig":"g")}this.matches=function(j,m){if(j){e.lastIndex=0;var h=b.getLine(m.line).slice(0,m.ch),i=e.exec(h),l=0;while(i){l+=i.index+1;h=h.slice(l);e.lastIndex=0;var k=e.exec(h);if(k){i=k}else{break}}l--}else{e.lastIndex=m.ch;var h=b.getLine(m.line),i=e.exec(h),l=i&&i.index}if(i){return{from:{line:m.line,ch:l},to:{line:m.line,ch:l+i[0].length},match:i}}}}else{if(d){e=e.toLowerCase()}var c=d?function(h){return h.toLowerCase()}:function(h){return h};var f=e.split("\n");if(f.length==1){this.matches=function(k,l){var i=c(b.getLine(l.line)),h=e.length,j;if(k?(l.ch>=h&&(j=i.lastIndexOf(e,l.ch-h))!=-1):(j=i.indexOf(e,l.ch))!=-1){return{from:{line:l.line,ch:j},to:{line:l.line,ch:j+h}}}}}else{this.matches=function(m,o){var n=o.line,p=(m?f.length-1:0),k=f[p],q=c(b.getLine(n));var l=(m?q.indexOf(k)+k.length:q.lastIndexOf(k));if(m?l>=o.ch||l!=k.length:l<=o.ch||l!=q.length-k.length){return}for(;;){if(m?!n:n==b.lineCount()-1){return}q=c(b.getLine(n+=m?-1:1));k=f[m?--p:++p];if(p>0&&p<f.length-1){if(q!=k){return}else{continue}}var j=(m?q.lastIndexOf(k):q.indexOf(k)+k.length);if(m?j!=q.length-k.length:j!=k.length){return}var h={line:o.line,ch:l},i={line:n,ch:j};return{from:m?i:h,to:m?h:i}}}}}}a.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(c){var b=this,f=this.cm.clipPos(c?this.pos.from:this.pos.to);function d(g){var h={line:g,ch:0};b.pos={from:h,to:h};b.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(c,f)){this.atOccurrence=true;return this.pos.match||true}if(c){if(!f.line){return d(0)}f={line:f.line-1,ch:this.cm.getLine(f.line-1).length}}else{var e=this.cm.lineCount();if(f.line==e-1){return d(e)}f={line:f.line+1,ch:0}}}},from:function(){if(this.atOccurrence){return this.pos.from}},to:function(){if(this.atOccurrence){return this.pos.to}},replace:function(c){var b=this;if(this.atOccurrence){b.pos.to=this.cm.replaceRange(c,b.pos.from,b.pos.to)}}};CodeMirror.defineExtension("getSearchCursor",function(c,d,b){return new a(this,c,d,b)})})();(function(){function a(b,f,c){var e=b.getWrapperElement();var d;d=e.appendChild(document.createElement("div"));if(c){d.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{d.className="CodeMirror-dialog CodeMirror-dialog-top"}d.innerHTML=f;return d}CodeMirror.defineExtension("openDialog",function(g,h,j){var d=a(this,g,j&&j.bottom);var c=false,e=this;function i(){if(c){return}c=true;d.parentNode.removeChild(d)}var f=d.getElementsByTagName("input")[0],b;if(f){CodeMirror.on(f,"keydown",function(k){if(k.keyCode==13||k.keyCode==27){CodeMirror.e_stop(k);i();e.focus();if(k.keyCode==13){h(f.value)}}});f.focus();CodeMirror.on(f,"blur",i)}else{if(b=d.getElementsByTagName("button")[0]){CodeMirror.on(b,"click",function(){i();e.focus()});b.focus();CodeMirror.on(b,"blur",i)}}return i});CodeMirror.defineExtension("openConfirm",function(l,f,n){var g=a(this,l,n&&n.bottom);var h=g.getElementsByTagName("button");var e=false,j=this,c=1;function m(){if(e){return}e=true;g.parentNode.removeChild(g);j.focus()}h[0].focus();for(var d=0;d<h.length;++d){var k=h[d];(function(b){CodeMirror.on(k,"click",function(i){CodeMirror.e_preventDefault(i);m();if(b){b(j)}})})(f[d]);CodeMirror.on(k,"blur",function(){--c;setTimeout(function(){if(c<=0){m()}},200)});CodeMirror.on(k,"focus",function(){++c})}})})();